

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Static Object Collision</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster.custom.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster.bundle.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-shadow.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-punk.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-noir.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-light.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-borderless.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/micromodal.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/sphinx_rtd_theme.css?v=3234e928" />
      <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css?v=6ad1a40c" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=fe408b2f" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/js/hoverxref.js"></script>
      <script src="../../_static/js/tooltipster.bundle.min.js"></script>
      <script src="../../_static/js/micromodal.min.js"></script>
      <script src="../../_static/js/versionwarning.js?v=d4224a34"></script>
      <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../_static/copybutton.js?v=f281be69"></script>
      <script src="../../_static/design-tabs.js?v=36754332"></script>
      <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Lighting" href="../lighting/index.html" />
    <link rel="prev" title="Collisions" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Dagor Documentation
              <img src="../../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../dagor-home/index.html">Dagor Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.html">Getting Started with Dagor</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Assets and Assets Management</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../about-assets/index.html">Assets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../all-about-blk/index.html">All About <code class="docutils literal notranslate"><span class="pre">.blk</span></code> Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../animations/index.html">Animations</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Collisions</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Static Object Collision</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#collision-concepts">Collision Concepts</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#about-collisions">About Collisions</a></li>
<li class="toctree-l5"><a class="reference internal" href="#collision-placement">Collision Placement</a></li>
<li class="toctree-l5"><a class="reference internal" href="#collision-parameters">Collision Parameters</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#general-parameters">General Parameters</a><ul>
<li class="toctree-l7"><a class="reference internal" href="#parameter-renderable-b-yes-no">Parameter: <code class="docutils literal notranslate"><span class="pre">renderable:b=yes/no</span></code></a></li>
<li class="toctree-l7"><a class="reference internal" href="#parameter-collidable-b-yes-no">Parameter: <code class="docutils literal notranslate"><span class="pre">collidable:b=yes/no</span></code></a></li>
<li class="toctree-l7"><a class="reference internal" href="#parameter-collision-t">Parameter: <code class="docutils literal notranslate"><span class="pre">collision:t=&quot;&quot;</span></code></a><ul>
<li class="toctree-l8"><a class="reference internal" href="#type-mesh">Type: <code class="docutils literal notranslate"><span class="pre">mesh</span></code></a></li>
<li class="toctree-l8"><a class="reference internal" href="#type-box">Type: <code class="docutils literal notranslate"><span class="pre">box</span></code></a></li>
<li class="toctree-l8"><a class="reference internal" href="#type-convex">Type: <code class="docutils literal notranslate"><span class="pre">convex</span></code></a></li>
<li class="toctree-l8"><a class="reference internal" href="#capsule"><code class="docutils literal notranslate"><span class="pre">capsule</span></code></a></li>
</ul>
</li>
<li class="toctree-l7"><a class="reference internal" href="#parameter-phmat-t">Parameter: <code class="docutils literal notranslate"><span class="pre">phmat:t=&quot;&quot;</span></code></a></li>
</ul>
</li>
<li class="toctree-l6"><a class="reference internal" href="#danetgame-based-project-parameters">daNetGame-based Project Parameters</a></li>
<li class="toctree-l6"><a class="reference internal" href="#parameters-isphyscollidable-istraceable">Parameters: <code class="docutils literal notranslate"><span class="pre">isPhysCollidable</span></code>/<code class="docutils literal notranslate"><span class="pre">isTraceable</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="#collision-separation-principles">Collision Separation Principles</a></li>
<li class="toctree-l6"><a class="reference internal" href="#how-to-assign-parameters">How to Assign Parameters</a></li>
<li class="toctree-l6"><a class="reference internal" href="#guidelines-for-using-each-collision-type">Guidelines for Using Each Collision Type</a></li>
<li class="toctree-l6"><a class="reference internal" href="#physical-collision">Physical Collision</a></li>
<li class="toctree-l6"><a class="reference internal" href="#trace-collision">Trace Collision</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#collision-design-principles">Collision Design Principles</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#closed-collision-geometry">Closed Collision Geometry</a></li>
<li class="toctree-l5"><a class="reference internal" href="#fitting-collision-to-visible-geometry">Fitting Collision to Visible Geometry</a></li>
<li class="toctree-l5"><a class="reference internal" href="#describing-important-parts">Describing Important Parts</a></li>
<li class="toctree-l5"><a class="reference internal" href="#collision-optimization">Collision Optimization</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#simple-collisions-box-convex-capsule">Simple Collisions: <code class="docutils literal notranslate"><span class="pre">box</span></code>, <code class="docutils literal notranslate"><span class="pre">convex</span></code>, <code class="docutils literal notranslate"><span class="pre">capsule</span></code></a><ul>
<li class="toctree-l5"><a class="reference internal" href="#box-collision">Box Collision</a></li>
<li class="toctree-l5"><a class="reference internal" href="#convex-collision">Convex Collision</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#ds-max-massfx-modifier">3ds Max: MassFX modifier</a></li>
<li class="toctree-l6"><a class="reference internal" href="#optimizing-convex-collision">Optimizing Convex Collision</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#capsule-collision">Capsule Collision</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#parent-child-collisions">Parent-Child Collisions</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#example-scenarios-of-parent-child-combinations">Example Scenarios of Parent-Child Combinations</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#collision-naming-conventions-in-3ds-max">Collision Naming Conventions in 3ds Max</a></li>
<li class="toctree-l4"><a class="reference internal" href="#typical-collision-problems-and-pitfalls">Typical Collision Problems and Pitfalls</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#unclosed-geometry-in-physical-collisions">Unclosed Geometry in Physical Collisions</a></li>
<li class="toctree-l5"><a class="reference internal" href="#degenerate-triangles">Degenerate Triangles</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#causes">Causes</a></li>
<li class="toctree-l6"><a class="reference internal" href="#detection-methods">Detection Methods</a></li>
<li class="toctree-l6"><a class="reference internal" href="#fixing-methods">Fixing Methods</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#inverted-normals">Inverted Normals</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#id1">Causes</a></li>
<li class="toctree-l6"><a class="reference internal" href="#id2">Detection Methods</a><ul>
<li class="toctree-l7"><a class="reference internal" href="#flipped-polygons">Flipped Polygons</a></li>
<li class="toctree-l7"><a class="reference internal" href="#inverted-scale-matrices">Inverted Scale Matrices</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#missing-triangulation-in-complex-physical-collisions">Missing Triangulation in Complex Physical Collisions</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#id3">Causes</a></li>
<li class="toctree-l6"><a class="reference internal" href="#id4">Detection Methods</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#collision-handling-in-folder-blk">Collision Handling in <code class="docutils literal notranslate"><span class="pre">.folder.blk</span></code></a><ul>
<li class="toctree-l5"><a class="reference internal" href="#usage-examples">Usage Examples</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lighting/index.html">Lighting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../materials/index.html">Materials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shaders/index.html">Shaders</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../dagor-tools/index.html">Dagor Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../projects/index.html">Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials and Manuals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api-references/index.html">API References and Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Dagor Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Assets and Assets Management</a></li>
          <li class="breadcrumb-item"><a href="index.html">Collisions</a></li>
      <li class="breadcrumb-item active">Static Object Collision</li>
  
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/assets/collisions/static_object_collision.md.txt" rel="nofollow"> View page source</a>
      </li>
  <li class="wy-breadcrumbs-aside.github-icon">
    <a href="https://github.com/GaijinEntertainment/DagorEngine" target="_blank" rel="noopener">
      <img src="../../_static/_images/github-mark.png"
           alt="GitHub"
           style="height: 1.5em; vertical-align: text-bottom; " />
    </a>
  </li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="static-object-collision">
<h1>Static Object Collision<a class="headerlink" href="#static-object-collision" title="Link to this heading"></a></h1>
<section id="collision-concepts">
<h2>Collision Concepts<a class="headerlink" href="#collision-concepts" title="Link to this heading"></a></h2>
<section id="about-collisions">
<h3>About Collisions<a class="headerlink" href="#about-collisions" title="Link to this heading"></a></h3>
<p>Collision geometry, often called a “collider”, defines how an object interacts
with the player and the environment. It represents the shapes that physically
block character movement, obstruct bullets, and determine where bullet impact
decals appear.</p>
<p>In practice, collision geometry is contained within the object’s <code class="docutils literal notranslate"><span class="pre">.dag</span></code> file and
outlines specific parts of the object. Further details on this structure will be
provided later.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To avoid the need to search through the document, here is a summary of common
and project-specific collision parameters:</p>
<p><strong>Common parameters (used in all projects):</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">renderable:b=yes</span></code>: Enables rendering of the node’s visual geometry.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">collidable:b=yes</span></code>: Enables the node to participate in collision calculations.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">collision:t=&quot;mesh&quot;</span></code>: Defines the collision type. Supported values are <code class="docutils literal notranslate"><span class="pre">mesh</span></code>,
<code class="docutils literal notranslate"><span class="pre">box</span></code>, <code class="docutils literal notranslate"><span class="pre">convex</span></code>, and <code class="docutils literal notranslate"><span class="pre">capsule</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">phmat:t=&quot;stone&quot;</span></code>: Specifies the physical material used for collision.</p></li>
</ul>
<p><strong>Parameters specific to daNetGame-based projects:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">isPhysCollidable:b=yes</span></code>: Enables the collision for physical interactions such
as walking, vehicle movement, and object placement.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isTraceable:b=yes</span></code>: Enables the collision for traces, including shooting,
object interaction, and bullet decals.</p></li>
</ul>
</div>
</section>
<section id="collision-placement">
<h3>Collision Placement<a class="headerlink" href="#collision-placement" title="Link to this heading"></a></h3>
<p>In War Thunder, collision geometry is typically placed in the final LOD (Level
of Detail) of the object, excluding LOD03. Most commonly, it resides in LOD01 or
LOD02. If the object has only one LOD (LOD00), the collision is placed there.</p>
<p>In daNetGame-based projects, collisions are generally placed in LOD01.</p>
<p>During the <a class="reference internal" href="#../../dagor-tools/resource-building/resource_building.md"><span class="xref myst">resource
building</span></a> process,
collision geometry is automatically collected into a collision pack based on the
rules defined in the <code class="docutils literal notranslate"><span class="pre">.folder.blk</span></code> file.</p>
<p>If the collision shown in the <a class="reference internal" href="../../dagor-tools/asset-viewer/asset-viewer/asset_viewer.html"><span class="std std-doc">Asset
Viewer</span></a> does not
match what was authored, consider the following possible causes:</p>
<ol class="arabic simple">
<li><p>The collision geometry was placed in the wrong LOD.</p></li>
<li><p>The collision was not exported with the LOD.</p></li>
<li><p>Collision properties were missing or incorrectly configured.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">.folder.blk</span></code> file is referencing the incorrect LOD for collision.</p></li>
</ol>
</section>
<section id="collision-parameters">
<h3>Collision Parameters<a class="headerlink" href="#collision-parameters" title="Link to this heading"></a></h3>
<p>To ensure the engine correctly processes collision geometry, it must be placed
in the appropriate LOD and have the required parameters assigned. These
parameters are applied to the collision object in 3ds Max, where such objects
are referred to as <em>nodes</em> in FAR.</p>
<p>There are two ways to assign these parameters:</p>
<ul>
<li><p><strong>Within FAR</strong>: Parameters can be defined directly using a script block. For
clarity, they are illustrated below using code examples with comments.</p></li>
<li><p><strong>In 3ds Max</strong>: Parameters can also be assigned via the object’s properties.</p>
<a class="reference internal image-reference" href="../../_images/static_object_collision_01.jpg"><img alt="Object properties in 3ds Max" class="align-center" src="../../_images/static_object_collision_01.jpg" style="width: 55em;" />
</a>
</li>
</ul>
<p>Let’s review the full list of parameters using daNetGame-based project as an
example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>script{
// Common parameters
  renderable:b=yes    // Display the visual geometry of the node
  collidable:b=yes    // Use the node for collision calculations
  collision:t=&quot;mesh&quot;  // Collision type: &quot;mesh&quot; (can also be box, convex, capsule)
  phmat:t=&quot;stone&quot;     // Collision material

// daNetGame-based project parameters
  isPhysCollidable:b=yes // Use collision for physical interactions (walking, vehicle movement, object placement, etc.)
  isTraceable:b=yes      // Use collision for traces (shooting, object interaction, bullet decals, etc.)
}
</pre></div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If LOD geometry is being used for collision processing, ensure that the required
parameters are correctly assigned to that geometry. It is not necessary to
duplicate the geometry or create a separate object specifically for collision
purposes.</p>
</div>
<section id="general-parameters">
<h4>General Parameters<a class="headerlink" href="#general-parameters" title="Link to this heading"></a></h4>
<p>These parameters are used across all projects:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#parameter-renderable-b-yes-no"><code class="docutils literal notranslate"><span class="pre">renderable:b=yes/no</span></code></a></p></li>
<li><p><a class="reference internal" href="#parameter-collidable-b-yes-no"><code class="docutils literal notranslate"><span class="pre">collidable:b=yes/no</span></code></a></p></li>
<li><p><a class="reference internal" href="#parameter-collision-t"><code class="docutils literal notranslate"><span class="pre">collision:t=&quot;&quot;</span></code></a></p></li>
<li><p><a class="reference internal" href="#parameter-phmat-t"><code class="docutils literal notranslate"><span class="pre">phmat:t=&quot;&quot;</span></code></a></p></li>
</ul>
<section id="parameter-renderable-b-yes-no">
<h5>Parameter: <code class="docutils literal notranslate"><span class="pre">renderable:b=yes/no</span></code><a class="headerlink" href="#parameter-renderable-b-yes-no" title="Link to this heading"></a></h5>
<p>This parameter controls whether the collision geometry is rendered.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">yes</span></code>: The geometry is rendered (default).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">no</span></code>: The geometry is not rendered.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This parameter is currently non-functional, but it must be specified since it
could be activated in the future.</p>
<p>To ensure the collision geometry is not rendered:</p>
<ol class="arabic simple">
<li><p>Assign it the material <code class="docutils literal notranslate"><span class="pre">gi_black</span></code> (this material is not rendered by the
engine).</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">renderable:b=no</span></code> in the properties.</p></li>
<li><p>Uncheck the <strong>renderable</strong> box in the same properties.</p></li>
</ol>
</div>
</section>
<section id="parameter-collidable-b-yes-no">
<h5>Parameter: <code class="docutils literal notranslate"><span class="pre">collidable:b=yes/no</span></code><a class="headerlink" href="#parameter-collidable-b-yes-no" title="Link to this heading"></a></h5>
<p>This parameter determines whether the collision is functional.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">yes</span></code>: The collision is active (default).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">no</span></code>: The collision is inactive.</p></li>
</ul>
<p>Both visual geometry and collision geometry require this parameter. Visual
geometry typically should not have collisions, while collision geometry must
have it enabled.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We assign this parameter to both collision geometry and visible non-collidable
geometry.</p>
<ul class="simple">
<li><p>For collision geometry: <code class="docutils literal notranslate"><span class="pre">collidable:b=yes</span></code></p></li>
<li><p>For visible non-collidable geometry: <code class="docutils literal notranslate"><span class="pre">collidable:b=no</span></code></p></li>
</ul>
</div>
</section>
<section id="parameter-collision-t">
<h5>Parameter: <code class="docutils literal notranslate"><span class="pre">collision:t=&quot;&quot;</span></code><a class="headerlink" href="#parameter-collision-t" title="Link to this heading"></a></h5>
<p>This parameter defines how the collision geometry is interpreted. Currently,
there are four supported collision types.</p>
<section id="type-mesh">
<h6>Type: <code class="docutils literal notranslate"><span class="pre">mesh</span></code><a class="headerlink" href="#type-mesh" title="Link to this heading"></a></h6>
<p>The default and most resource-intensive collision type. It represents the
geometry with full accuracy, exactly as it is.</p>
<p><strong>Example</strong>: The <code class="docutils literal notranslate"><span class="pre">mesh</span></code> type is the default collision type, so specifying this
parameter is optional. This behavior originates from War Thunder, where the
<code class="docutils literal notranslate"><span class="pre">.folder.blk</span></code> file could sometimes force collisions to be treated as boxes. To
ensure that certain objects retained <code class="docutils literal notranslate"><span class="pre">mesh</span></code> collisions, the parameter had to be
explicitly set. In daNetGame-based projects, <code class="docutils literal notranslate"><span class="pre">mesh</span></code> collisions are used by
default without needing to specify the parameter.</p>
<div class="sd-container-fluid sd-sphinx-override sd-mb-4 center-grid docutils">
<div class="sd-row sd-row-cols-1 sd-row-cols-xs-1 sd-row-cols-sm-1 sd-row-cols-md-1 sd-row-cols-lg-1 docutils">
<div class="sd-col sd-d-flex-row sd-align-major-center center-cell docutils">
<a class="image-gap reference internal image-reference" href="../../_images/static_object_collision_02.jpg"><img alt="Mesh type collision" class="image-gap" src="../../_images/static_object_collision_02.jpg" style="height: 20em;" />
</a>
<a class="reference internal image-reference" href="../../_images/static_object_collision_03.jpg"><img alt="Mesh type collision" src="../../_images/static_object_collision_03.jpg" style="height: 20em;" />
</a>
</div>
</div>
</div>
</section>
<section id="type-box">
<h6>Type: <code class="docutils literal notranslate"><span class="pre">box</span></code><a class="headerlink" href="#type-box" title="Link to this heading"></a></h6>
<p>A simple rectangular box is the most lightweight and efficient collision type.
When this type is assigned to a collision object, it creates a box based on the
object’s bounding box and uses it as the collision shape.</p>
<p>This collision is treated as a basic box, not as a detailed mesh. In practical
terms, it behaves more like a primitive object in 3ds Max rather than a fully
editable poly mesh.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you created a box-shaped collision but did not set the <code class="docutils literal notranslate"><span class="pre">collision:t=&quot;box&quot;</span></code>
parameter, you’ve actually created a <code class="docutils literal notranslate"><span class="pre">mesh</span></code> collision in the shape of a box.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">collision:t=&quot;box&quot;</span></code> attribute is required for the collision to be treated as
a true box.</p>
<p>A simple way to check:</p>
<ul class="simple">
<li><p>A proper <code class="docutils literal notranslate"><span class="pre">box</span></code> collision in <a class="reference internal" href="../../dagor-tools/asset-viewer/asset-viewer/asset_viewer.html"><span class="std std-doc">Asset
Viewer</span></a> appears
as a box with white polygon edges (not triangle edges, those aren’t shown).</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">mesh</span></code> “box” in <a class="reference internal" href="../../dagor-tools/asset-viewer/asset-viewer/asset_viewer.html"><span class="std std-doc">Asset
Viewer</span></a> appears
as regular geometry with red/green triangle edges.</p></li>
</ul>
</div>
<p><strong>Example 1</strong>: The <code class="docutils literal notranslate"><span class="pre">box</span></code> collision type is ideal for rectangular or small
objects (up to mid-shin height), where the overall shape can be accurately
represented by a simple box. It is the most performance-efficient option.</p>
<div class="sd-container-fluid sd-sphinx-override sd-mb-4 center-grid docutils">
<div class="sd-row sd-row-cols-1 sd-row-cols-xs-1 sd-row-cols-sm-1 sd-row-cols-md-1 sd-row-cols-lg-1 docutils">
<div class="sd-col sd-d-flex-row sd-align-major-center center-cell docutils">
<a class="image-gap reference internal image-reference" href="../../_images/static_object_collision_04.jpg"><img alt="Box type collision" class="image-gap" src="../../_images/static_object_collision_04.jpg" style="height: 20em;" />
</a>
<a class="reference internal image-reference" href="../../_images/static_object_collision_05.jpg"><img alt="Box type collision" src="../../_images/static_object_collision_05.jpg" style="height: 20em;" />
</a>
</div>
</div>
</div>
<p><strong>Example 2</strong>: Small easily breakable objects that do not require detailed
collision such as a tin can can use the <code class="docutils literal notranslate"><span class="pre">box</span></code> type for better performance.</p>
<div class="sd-container-fluid sd-sphinx-override sd-mb-4 center-grid docutils">
<div class="sd-row sd-row-cols-1 sd-row-cols-xs-1 sd-row-cols-sm-1 sd-row-cols-md-1 sd-row-cols-lg-1 docutils">
<div class="sd-col sd-d-flex-row sd-align-major-center center-cell docutils">
<a class="image-gap reference internal image-reference" href="../../_images/static_object_collision_06.jpg"><img alt="Box type collision" class="image-gap" src="../../_images/static_object_collision_06.jpg" style="height: 20em;" />
</a>
<a class="reference internal image-reference" href="../../_images/static_object_collision_07.jpg"><img alt="Box type collision" src="../../_images/static_object_collision_07.jpg" style="height: 20em;" />
</a>
</div>
</div>
</div>
<p>Here is how it looks in-game with a <code class="docutils literal notranslate"><span class="pre">box</span></code> collision:</p>
<a class="reference internal image-reference" href="../../_images/static_object_collision_08.jpg"><img alt="Box type collision" class="align-center" src="../../_images/static_object_collision_08.jpg" style="width: 55em;" />
</a>
<p><strong>Example 3</strong>: Small decorative items can also use <code class="docutils literal notranslate"><span class="pre">box</span></code> collisions. These
objects are not part of gameplay and will not be specifically targeted
(excluding rare edge cases).</p>
<div class="sd-container-fluid sd-sphinx-override sd-mb-4 center-grid docutils">
<div class="sd-row sd-row-cols-1 sd-row-cols-xs-1 sd-row-cols-sm-1 sd-row-cols-md-1 sd-row-cols-lg-1 docutils">
<div class="sd-col sd-d-flex-row sd-align-major-center center-cell docutils">
<a class="image-gap reference internal image-reference" href="../../_images/static_object_collision_09.jpg"><img alt="Box type collision" class="image-gap" src="../../_images/static_object_collision_09.jpg" style="height: 20em;" />
</a>
<a class="reference internal image-reference" href="../../_images/static_object_collision_10.jpg"><img alt="Box type collision" src="../../_images/static_object_collision_10.jpg" style="height: 20em;" />
</a>
</div>
</div>
</div>
</section>
<section id="type-convex">
<h6>Type: <code class="docutils literal notranslate"><span class="pre">convex</span></code><a class="headerlink" href="#type-convex" title="Link to this heading"></a></h6>
<p>Convex geometry. Processed more efficiently than a <code class="docutils literal notranslate"><span class="pre">mesh</span></code> but less efficiently
than a <code class="docutils literal notranslate"><span class="pre">box</span></code>.</p>
<ul class="simple">
<li><p>Unlike a <code class="docutils literal notranslate"><span class="pre">box</span></code>, this type does not generate a bounding box around the
geometry; it uses the actual convex shape.</p></li>
<li><p>If the geometry is not <code class="docutils literal notranslate"><span class="pre">convex</span></code>, errors will appear in <a class="reference internal" href="../../dagor-tools/asset-viewer/asset-viewer/asset_viewer.html"><span class="std std-doc">Asset
Viewer</span></a> (this
will be explained later).</p></li>
</ul>
<p>As with <code class="docutils literal notranslate"><span class="pre">box</span></code>, <code class="docutils literal notranslate"><span class="pre">convex</span></code> collisions are only recognized as such when this
parameter is specified. If it is missing, a <code class="docutils literal notranslate"><span class="pre">convex</span></code> collision will be displayed
semi-transparent instead of with highlighted edges.</p>
<p><strong>Example</strong>: The <code class="docutils literal notranslate"><span class="pre">convex</span></code> collisions provide detailed yet relatively efficient
processing.</p>
<div class="sd-container-fluid sd-sphinx-override sd-mb-4 center-grid docutils">
<div class="sd-row sd-row-cols-1 sd-row-cols-xs-1 sd-row-cols-sm-1 sd-row-cols-md-1 sd-row-cols-lg-1 docutils">
<div class="sd-col sd-d-flex-row sd-align-major-center center-cell docutils">
<a class="image-gap reference internal image-reference" href="../../_images/static_object_collision_11.jpg"><img alt="Convex type collision" class="image-gap" src="../../_images/static_object_collision_11.jpg" style="height: 20em;" />
</a>
<a class="reference internal image-reference" href="../../_images/static_object_collision_12.jpg"><img alt="Convex type collision" src="../../_images/static_object_collision_12.jpg" style="height: 20em;" />
</a>
</div>
</div>
</div>
<p>Use <code class="docutils literal notranslate"><span class="pre">convex</span></code> (or <code class="docutils literal notranslate"><span class="pre">box</span></code>) collisions whenever appropriate, especially for
frequently repeated objects, to optimize collision handling. However, do not
sacrifice collision quality just to use <code class="docutils literal notranslate"><span class="pre">convex</span></code>.</p>
</section>
<section id="capsule">
<h6><code class="docutils literal notranslate"><span class="pre">capsule</span></code><a class="headerlink" href="#capsule" title="Link to this heading"></a></h6>
<p>Capsule-shaped collision. More efficient than <code class="docutils literal notranslate"><span class="pre">mesh</span></code> but less efficient than
<code class="docutils literal notranslate"><span class="pre">box</span></code>.</p>
<p>Like the <code class="docutils literal notranslate"><span class="pre">box</span></code> type, this parameter creates a capsule around the bounding box of
the collision geometry and treats it as such only when the property is
specified.</p>
<p><strong>Example</strong>: The <code class="docutils literal notranslate"><span class="pre">capsule</span></code> collision type is used for cylindrical objects.</p>
<p>Since few static objects have simple cylindrical shapes that can be represented
by one or two capsules, this type is rarely applied to static objects. It is
more commonly used in destrs, where cylindrical parts can be isolated and
assigned <code class="docutils literal notranslate"><span class="pre">capsule</span></code> collisions.</p>
<div class="sd-container-fluid sd-sphinx-override sd-mb-4 center-grid docutils">
<div class="sd-row sd-row-cols-1 sd-row-cols-xs-1 sd-row-cols-sm-1 sd-row-cols-md-1 sd-row-cols-lg-1 docutils">
<div class="sd-col sd-d-flex-row sd-align-major-center center-cell docutils">
<a class="image-gap reference internal image-reference" href="../../_images/static_object_collision_13.jpg"><img alt="Capsule type collision" class="image-gap" src="../../_images/static_object_collision_13.jpg" style="height: 20em;" />
</a>
<a class="reference internal image-reference" href="../../_images/static_object_collision_14.jpg"><img alt="Capsule type collision" src="../../_images/static_object_collision_14.jpg" style="height: 20em;" />
</a>
</div>
</div>
</div>
</section>
</section>
<section id="parameter-phmat-t">
<h5>Parameter: <code class="docutils literal notranslate"><span class="pre">phmat:t=&quot;&quot;</span></code><a class="headerlink" href="#parameter-phmat-t" title="Link to this heading"></a></h5>
<p>This parameter defines the physical material assigned to an object, ensuring
appropriate sound effects for impacts, decals, and footsteps are applied to its
surface.</p>
<p>It is specifically applied to collision geometry. For objects using multiple
materials, the collision geometry must be segmented accordingly, with each
segment assigned the correct physical material.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>For objects featuring both trace and physical collisions, physical materials
(“physmats”) must be defined for both collision types.</p>
</div>
<p>Physical material names are predefined and must adhere to established naming
conventions. To view the physical material assigned to a collision in <a class="reference internal" href="../../dagor-tools/asset-viewer/asset-viewer/asset_viewer.html"><span class="std std-doc">Asset
Viewer</span></a>, select the
collision geometry in the viewport. The object’s properties panel will display
the assigned physical material.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>For more information, see
<a class="reference internal" href="../materials/physmats.html"><span class="std std-doc">Physmats</span></a>.</p>
</div>
<p>This approach also serves as a validation method: if “default” appears instead
of the expected physmat, it indicates that an invalid or no physical material
has been assigned.</p>
<a class="reference internal image-reference" href="../../_images/static_object_collision_15.jpg"><img alt="Physmat is not assigned" class="align-center" src="../../_images/static_object_collision_15.jpg" style="width: 33em;" />
</a>
<p>The following physical materials are most commonly used for props:</p>
<table class="docutils align-center">
<thead>
<tr class="row-odd"><th class="head"><p>Material Type</p></th>
<th class="head"><p>War Thunder</p></th>
<th class="head"><p>daNetGame-based</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Vegetation</p></td>
<td><ul class="simple">
<li><p>wood</p></li>
</ul>
</td>
<td><ul class="simple">
<li><p>cactus</p></li>
<li><p>wood</p></li>
<li><p>wood_solid</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>Hard stone</p></td>
<td><ul class="simple">
<li><p>ceramic</p></li>
<li><p>concrete</p></li>
<li><p>stone</p></li>
</ul>
</td>
<td><ul class="simple">
<li><p>concrete</p></li>
<li><p>bricks_red</p></li>
<li><p>stone_snow</p></li>
<li><p>rocks</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>Earth</p></td>
<td><ul class="simple">
<li><p>dirt</p></li>
<li><p>sand</p></li>
<li><p>snow</p></li>
<li><p>soil</p></li>
</ul>
</td>
<td><ul class="simple">
<li><p>dirt</p></li>
<li><p>sand</p></li>
<li><p>snow</p></li>
<li><p>soil</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>Metal</p></td>
<td><ul class="simple">
<li><p>steel_bullet_transparent</p></li>
</ul>
</td>
<td><ul class="simple">
<li><p>metal</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>Cloth</p></td>
<td><ul class="simple">
<li><p>fabric</p></li>
</ul>
</td>
<td><ul class="simple">
<li><p>fabric</p></li>
<li><p>paper</p></li>
<li><p>plastic</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>Man-made</p></td>
<td></td>
<td><ul class="simple">
<li><p>flesh</p></li>
<li><p>rubber</p></li>
<li><p>barbwire</p></li>
<li><p>window_wood</p></li>
<li><p>softWoodDoor</p></li>
<li><p>softSteelDoor</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>Hard transparent</p></td>
<td><ul class="simple">
<li><p>glass</p></li>
<li><p>glass_small</p></li>
<li><p>ice</p></li>
<li><p>transparentBeton</p></li>
<li><p>transparentCamera</p></li>
</ul>
</td>
<td><ul class="simple">
<li><p>glass</p></li>
<li><p>ice</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>If the required physmat is not available, attempt to locate the closest matching
material. If no suitable alternative exists, submit a request for a new material
to be created. Avoid assigning a non-existent physmat arbitrarily, as this will
cause the system to default to the generic “default” material, resulting in
unintended behavior.</p>
<p>Asset managers can review the current list of physical materials in the
<code class="docutils literal notranslate"><span class="pre">physmat.blk</span></code> file. For War Thunder, this file is located at
<code class="docutils literal notranslate"><span class="pre">&lt;project_name&gt;/develop/gameBase/config</span></code>.</p>
</section>
</section>
<section id="danetgame-based-project-parameters">
<h4>daNetGame-based Project Parameters<a class="headerlink" href="#danetgame-based-project-parameters" title="Link to this heading"></a></h4>
<p>These parameters are specific to daNetGame-based projects and must <strong>not</strong> be
used in War Thunder.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">isPhysCollidable:b=yes/no</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isTraceable:b=yes/no</span></code></p></li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>It is essential to understand that these parameters operate independently. Each
controls a distinct aspect of collision behavior, with no overlap between them.</p>
<p>For example, physical collision may be defined as <code class="docutils literal notranslate"><span class="pre">convex</span></code>, while trace
collision can use a <code class="docutils literal notranslate"><span class="pre">box</span></code> type. These represent separate systems that function
without interfering with one another.</p>
</div>
</section>
<section id="parameters-isphyscollidable-istraceable">
<h4>Parameters: <code class="docutils literal notranslate"><span class="pre">isPhysCollidable</span></code>/<code class="docutils literal notranslate"><span class="pre">isTraceable</span></code><a class="headerlink" href="#parameters-isphyscollidable-istraceable" title="Link to this heading"></a></h4>
<p>These parameters are presented together because, although they operate
independently, they are frequently used in conjunction. Neither parameter
disables the other; instead, each explicitly indicates the intended purpose of a
specific collision.</p>
<p>By default, collisions are treated as applicable for both physical interaction
and tracing. Therefore, defining a collision without specifying these parameters
leaves ambiguity about its role.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If an object contains multiple collision meshes and one mesh is explicitly
designated as either a “trace” or “physical” collision, you must assign
corresponding parameters to <strong>all</strong> other meshes. Failure to do so will cause
those meshes to inherit the properties of the explicitly defined mesh,
potentially resulting in unintended trace-only or physical-only collision
behavior.</p>
</div>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">isPhysCollidable:b=yes</span></code>: This parameter designates collisions that interact
exclusively with the character’s capsule. Since most player-environment
interactions occur through the capsule and exclude shooting, these collisions
do not register interactions with weapons. Players can shoot, slash, or strike
through them without obstruction.</p>
<p>Collisions marked with this parameter are simplified to approximate the
general shape of objects or object parts with which the player physically
interacts, such as surfaces to walk on or obstacles to collide against. This
simplification is critical because capsule collision processing is
computationally expensive; the simpler the collision geometry, the lower the
performance cost.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">isTraceable:b=yes</span></code>: This parameter indicates that the collision interacts
exclusively with the player’s weapons, including shooting and melee attacks.
It does not interact with the character’s capsule, allowing the player to move
through it freely.</p>
<p>Collisions assigned this parameter are made more precise than physical
collisions, but only to the degree necessary for accurate bullet tracing. The
objective is to create a collision that sufficiently covers the shootable
geometry without unnecessary detail. For example, it is not required to
include every door handle or small metal rivet on a wooden door just to
produce accurate hit decals.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Trace collision is not without computational cost. Avoid applying trace
collision to non-essential geometry that does not affect bullet tracing, even
if it improves visual accuracy for decals. Apply trace collisions only to
objects that impact gameplay or are large enough that inaccurate decals would
be noticeable.</p>
</div>
</li>
</ul>
<div class="sd-container-fluid sd-sphinx-override sd-mb-4 center-grid docutils">
<div class="sd-row sd-row-cols-2 sd-row-cols-xs-2 sd-row-cols-sm-2 sd-row-cols-md-2 sd-row-cols-lg-2 sd-g-2 sd-g-xs-2 sd-g-sm-2 sd-g-md-2 sd-g-lg-2 docutils">
<div class="sd-col sd-d-flex-column center-cell docutils">
<a class="image-gap reference internal image-reference" href="../../_images/static_object_collision_16.jpg"><img alt="Text" class="image-gap align-center" src="../../_images/static_object_collision_16.jpg" style="height: 40em;" />
</a>
</div>
<div class="sd-col sd-d-flex-column center-cell docutils">
<a class="reference internal image-reference" href="../../_images/static_object_collision_17.jpg"><img alt="Text" class="align-center" src="../../_images/static_object_collision_17.jpg" style="height: 40em;" />
</a>
</div>
<div class="sd-col sd-d-flex-row sd-align-major-center docutils">
<p>For a door, trace collision should only cover the wooden panel, as the
rest of the structure doesn’t affect gameplay and is too small to
justify the added complexity.</p>
</div>
<div class="sd-col sd-d-flex-row sd-align-major-center docutils">
<p>In this case, glass was assigned its own collision and separate
material because it is easier to shoot through than wood, affecting
bullet penetration, and because its large surface area would look
unrealistic if wooden decals appeared on it.</p>
</div>
</div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>A specific engine behavior to keep in mind: characters interact with physical
collisions using their capsule, but foot placement relies on trace collisions.</p>
<p>For example, consider a large object with a recessed center, such as a flower
bed that the player can climb onto but cannot shoot through in the recessed
area. In this case, the trace collision must accurately include the recess to
ensure correct foot placement. The physical collision, however, should remain
simplified and exclude the recess to reduce processing cost.</p>
<p>If the trace collision does not reflect the actual surface geometry, the
character’s feet may appear to float or walk on air, as foot placement is guided
solely by the trace geometry.</p>
</div>
</section>
<section id="collision-separation-principles">
<h4>Collision Separation Principles<a class="headerlink" href="#collision-separation-principles" title="Link to this heading"></a></h4>
<p>The core principle is simple: if an object needs to support both physical and
trace interactions, <strong>create two separate collision meshes</strong>, each optimized for
its specific purpose.</p>
<ul class="simple">
<li><p><strong>Physical collisions</strong> should be as simple as possible. Use convex shapes,
capsules, or boxes whenever feasible to minimize performance cost.</p></li>
<li><p><strong>Trace collisions</strong> should be only as detailed as necessary to accurately
capture bullet paths and significant material surfaces. Avoid unnecessary
complexity that does not affect gameplay.</p></li>
</ul>
</section>
<section id="how-to-assign-parameters">
<h4>How to Assign Parameters<a class="headerlink" href="#how-to-assign-parameters" title="Link to this heading"></a></h4>
<p>Collision parameters must always be specified in <strong>pairs</strong>: <code class="docutils literal notranslate"><span class="pre">isPhysCollidable</span></code>
and <code class="docutils literal notranslate"><span class="pre">isTraceable</span></code>. These should <strong>never be assigned individually</strong>, as doing so
may lead to inconsistent or unintended behavior.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">isPhysCollidable:b=yes</span></code> | <code class="docutils literal notranslate"><span class="pre">isTraceable:b=yes</span></code>: These are the <strong>default
values</strong>. You may specify them explicitly, but it is not required. Including
them is not considered an error, though it adds no functional value.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isPhysCollidable:b=no</span></code> | <code class="docutils literal notranslate"><span class="pre">isTraceable:b=no</span></code>: This combination serves no
practical purpose. If the collision is not needed at all, simply set the
primary <code class="docutils literal notranslate"><span class="pre">collidable:b</span></code> parameter to <code class="docutils literal notranslate"><span class="pre">no</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isPhysCollidable:b=yes</span></code> | <code class="docutils literal notranslate"><span class="pre">isTraceable:b=no</span></code>: Enables physical collision
only. The object will block player movement (e.g., walking or driving) but
will not register weapon traces,bullets and projectiles will pass through.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Append the suffix <code class="docutils literal notranslate"><span class="pre">_phys</span></code> to the collision node in the scene to indicate its
role.</p>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">isPhysCollidable:b=no</span></code> | <code class="docutils literal notranslate"><span class="pre">isTraceable:b=yes</span></code>: Enables trace collision only.
The object will block bullets and projectiles but will not obstruct player
movement—characters and vehicles can pass through it.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Append the suffix <code class="docutils literal notranslate"><span class="pre">_trace</span></code> to the collision node in the scene to indicate its
role.</p>
</div>
</li>
</ul>
</section>
<section id="guidelines-for-using-each-collision-type">
<h4>Guidelines for Using Each Collision Type<a class="headerlink" href="#guidelines-for-using-each-collision-type" title="Link to this heading"></a></h4>
<p>These guidelines focus on identifying when a particular type of collision is
<strong>not required</strong>. By default, both physical and trace collisions are enabled
unless explicitly overridden.</p>
</section>
<section id="physical-collision">
<h4>Physical Collision<a class="headerlink" href="#physical-collision" title="Link to this heading"></a></h4>
<p>Avoid specifying physical collision in the following cases:</p>
<ul class="simple">
<li><p><strong>Small objects</strong> (typically less than knee height), such as scattered bricks,
books, or bottles. Assigning physical collision to these would cause the
player to constantly bump into them, resulting in camera jitter and disrupted
aiming.</p></li>
<li><p><strong>Flat surfaces</strong> that do not require a distinct physical material, such as
carpets or decals.</p></li>
<li><p><strong>Out-of-reach elements</strong> that the player cannot physically interact with,
such as objects placed high above the playable area or inaccessible
architectural details.</p></li>
</ul>
<p><strong>Example 1:</strong></p>
<ul class="simple">
<li><p><strong>Amphora handles</strong>: These are small decorative elements that do not affect
gameplay or player movement. Collisions with them would have no noticeable
impact.</p></li>
<li><p><strong>Upper sections of a pillar</strong>: If the player cannot reach or interact with
these areas physically, assigning collision is unnecessary.</p></li>
<li><p><strong>Small details on a milk can</strong>, such as handles: Like the amphora, these
elements do not influence player movement or interaction and can be safely
excluded from physical collision.</p></li>
</ul>
<div class="sd-container-fluid sd-sphinx-override sd-mb-4 center-grid docutils">
<div class="sd-row sd-row-cols-1 sd-row-cols-xs-1 sd-row-cols-sm-1 sd-row-cols-md-1 sd-row-cols-lg-1 docutils">
<div class="sd-col sd-d-flex-row sd-align-major-center center-cell docutils">
<a class="image-gap reference internal image-reference" href="../../_images/static_object_collision_11.jpg"><img alt="Amphora handles" class="image-gap" src="../../_images/static_object_collision_11.jpg" style="height: 20em;" />
</a>
<a class="image-gap reference internal image-reference" href="../../_images/static_object_collision_18.jpg"><img alt="Upper sections of a pillar" class="image-gap" src="../../_images/static_object_collision_18.jpg" style="height: 20em;" />
</a>
<a class="reference internal image-reference" href="../../_images/static_object_collision_19.jpg"><img alt="Small details on a milk can" src="../../_images/static_object_collision_19.jpg" style="height: 20em;" />
</a>
</div>
</div>
</div>
<p><strong>Example 2:</strong> Compact objects below knee height that the player should not
physically collide with such as small debris or clutter should generally not
have physical collision assigned. Allowing collisions on these items can cause
the player to awkwardly jump or stumble over them, disrupting smooth gameplay
and camera behavior.</p>
<a class="reference internal image-reference" href="../../_images/static_object_collision_20.jpg"><img alt="Small props to exclude from physical collision" class="align-center" src="../../_images/static_object_collision_20.jpg" style="width: 55em;" />
</a>
<p><strong>Example 3:</strong> Flat objects such as rugs do not require physical collision since
omitting a physical material will not impact the sound of footsteps or player
interaction.</p>
<a class="reference internal image-reference" href="../../_images/static_object_collision_21.jpg"><img alt="Flat objects excluded from physical collision" class="align-center" src="../../_images/static_object_collision_21.jpg" style="width: 55em;" />
</a>
</section>
<section id="trace-collision">
<h4>Trace Collision<a class="headerlink" href="#trace-collision" title="Link to this heading"></a></h4>
<p>Avoid specifying trace collision in the following cases:</p>
<ul class="simple">
<li><p><strong>Objects or parts never in the line of fire</strong>, where bullets will not
realistically hit them.</p></li>
<li><p><strong>Non-essential objects</strong> that players will not engage with in detail; these
should have simplified collision by removing unnecessary elements.</p></li>
<li><p><strong>Parts covered by other collision meshes</strong>, such as roof beams hidden beneath
the main roof geometry.</p></li>
<li><p><strong>Objects where shooting serves no gameplay purpose</strong>, for example:</p>
<ul>
<li><p>Books or bricks on the floor that do not break, where the ground impact
particle effect is sufficient.</p></li>
<li><p>Posters on walls that do not break, where the wall impact particle effect is
appropriate.</p></li>
<li><p>Carpets on floors that do not break, where the floor impact particle effect
will suffice.</p></li>
</ul>
</li>
</ul>
<p><strong>Example 1:</strong> Handles on an amphora are too small and insignificant to be
considered in the line of fire.</p>
<a class="reference internal image-reference" href="../../_images/static_object_collision_11.jpg"><img alt="Handles on an amphora are too small" class="align-center" src="../../_images/static_object_collision_11.jpg" style="width: 15em;" />
</a>
<p><strong>Example 2:</strong> Beams under a ceiling are unlikely to be shot at, similar to
balcony supports attached to walls.</p>
<a class="reference internal image-reference" href="../../_images/static_object_collision_22.jpg"><img alt="Beams under a ceiling are unlikely to be shot at" class="align-center" src="../../_images/static_object_collision_22.jpg" style="width: 15em;" />
</a>
<p><strong>Example 3:</strong> Thin shootable elements should not have excessive collision
detail as it may interfere with gameplay by obstructing shots.</p>
<div class="sd-container-fluid sd-sphinx-override sd-mb-4 center-grid docutils">
<div class="sd-row sd-row-cols-1 sd-row-cols-xs-1 sd-row-cols-sm-1 sd-row-cols-md-1 sd-row-cols-lg-1 docutils">
<div class="sd-col sd-d-flex-row sd-align-major-center center-cell docutils">
<a class="image-gap reference internal image-reference" href="../../_images/static_object_collision_23.jpg"><img alt="Small elements of the lamp" class="image-gap" src="../../_images/static_object_collision_23.jpg" style="height: 20em;" />
</a>
<a class="reference internal image-reference" href="../../_images/static_object_collision_24.jpg"><img alt="Small elements of the lamp" src="../../_images/static_object_collision_24.jpg" style="height: 20em;" />
</a>
</div>
</div>
</div>
<p><strong>Example 4:</strong> Objects like light fixtures should be shootable but there is no
need to allocate extra polygons for their collision.</p>
<a class="reference internal image-reference" href="../../_images/static_object_collision_25.jpg"><img alt="Shootable objects" class="align-center" src="../../_images/static_object_collision_25.jpg" style="width: 30em;" />
</a>
<p><strong>Example 5:</strong> Trace collision is unnecessary for objects that do not need to be
shot through.</p>
<a class="reference internal image-reference" href="../../_images/static_object_collision_21.jpg"><img alt="Non shootable-through objects" class="align-center" src="../../_images/static_object_collision_21.jpg" style="width: 30em;" />
</a>
</section>
</section>
</section>
<section id="collision-design-principles">
<h2>Collision Design Principles<a class="headerlink" href="#collision-design-principles" title="Link to this heading"></a></h2>
<p>Effective collision handling relies on several fundamental principles:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#closed-collision-geometry">Collision geometry should be <strong>closed</strong></a> to
ensure reliable physics interactions.</p></li>
<li><p><a class="reference internal" href="#fitting-collision-to-visible-geometry">Collisions must not extend beyond the <strong>visible
geometry</strong></a> to prevent unexpected
clipping or blocking.</p></li>
<li><p>All parts of the object relevant to player interaction must be included.</p></li>
<li><p>Collision meshes should be <strong>highly optimized</strong> to minimize performance
impact.</p></li>
</ul>
<p>These principles can seem contradictory, as some call for detailed accuracy
while others emphasize efficiency. The key challenge is to find the right
balance between precision and optimization.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>It is essential to differentiate collisions based on an object’s <strong>size</strong> and
<strong>gameplay role</strong>:</p>
<ol class="arabic simple">
<li><p><strong>Gameplay-relevant objects</strong>, such as those in the line of fire, require
higher collision accuracy, especially for trace collisions, compared to
non-gameplay objects like props that do not affect bullets or visibility.</p></li>
<li><p><strong>Large objects</strong> warrant more detailed collision meshes for both trace and
physical collisions than smaller objects.</p></li>
</ol>
</div>
<section id="closed-collision-geometry">
<h3>Closed Collision Geometry<a class="headerlink" href="#closed-collision-geometry" title="Link to this heading"></a></h3>
<p>Collision geometry that contains holes, open edges, or consists of simple planes
can cause clipping issues where objects unintentionally pass through each other.
Therefore, as a fundamental rule, <strong>collision geometry must always be closed</strong>.</p>
<p>When separating physics and trace collisions, trace collisions which are
generally more detailed may omit unseen faces such as those intersecting other
collision geometry. However, physics collisions must <strong>always</strong> maintain closed
geometry to ensure reliable physical interactions.</p>
</section>
<section id="fitting-collision-to-visible-geometry">
<h3>Fitting Collision to Visible Geometry<a class="headerlink" href="#fitting-collision-to-visible-geometry" title="Link to this heading"></a></h3>
<p>The principle is straightforward: in a shooter game, when a player shoots at an
enemy, and the projectile hits an invisible barrier instead of the visible
object, it diminishes the gameplay experience. This makes precise collision
handling essential.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Additionally, note that occluding geometry, such as building walls, relies on
<strong>trace collision</strong>. Extending this collision geometry even slightly beyond the
building’s visible boundaries can cause <strong>occlusion bugs</strong>, including incorrect
object visibility when peeking around corners or aiming down sights.</p>
</div>
<p><strong>Example 1 (Good)</strong>: A Level of Detail (LOD) model has been optimized by
removing unnecessary loops. Minor protrusions in the collision geometry that do
not affect gameplay or bullet interaction are acceptable.</p>
<a class="reference internal image-reference" href="../../_images/static_object_collision_26.jpg"><img alt="Example 1 (good)" class="align-center" src="../../_images/static_object_collision_26.jpg" style="width: 30em;" />
</a>
<p><strong>Example 2 (Good)</strong>: A small amphora, while not gameplay-critical, may have
minor collision geometry extending beyond the visible object. This does not
impact the game experience since the item is destructible.</p>
<a class="reference internal image-reference" href="../../_images/static_object_collision_11.jpg"><img alt="Example 2 (good)" class="align-center" src="../../_images/static_object_collision_11.jpg" style="width: 30em;" />
</a>
<p><strong>Example 3 (Good)</strong>: The main geometry is properly collidable. Unnecessary
objects that do not impact gameplay are excluded from collision. For example:</p>
<ul class="simple">
<li><p>Ceiling beams do not affect the line of fire.</p></li>
<li><p>Balcony fixtures are highly unlikely to be in the line of fire.</p></li>
</ul>
<a class="reference internal image-reference" href="../../_images/static_object_collision_33.jpg"><img alt="Example 3 (good)" class="align-center" src="../../_images/static_object_collision_33.jpg" style="width: 30em;" />
</a>
<p><strong>Example 4 (Moderate)</strong>: Only important geometry is included in the collision
mesh. Unnecessary elements that do not influence gameplay, such as beams or
ceiling mounts, are excluded from the collision setup.</p>
<a class="reference internal image-reference" href="../../_images/static_object_collision_27.jpg"><img alt="Example 3 (moderate)" class="align-center" src="../../_images/static_object_collision_27.jpg" style="width: 50em;" />
</a>
<p><strong>Example 5 (Moderate)</strong>: The change in the width of the table leg should be
represented in low-poly form. While shots fired at this area are unlikely,
indoor crouch firefights remain a possibility.</p>
<a class="reference internal image-reference" href="../../_images/static_object_collision_28.jpg"><img alt="Example 5 (moderate)" class="align-center" src="../../_images/static_object_collision_28.jpg" style="width: 30em;" />
</a>
<p><strong>Example 6 (Poor)</strong>: Large vases with collision geometry covering empty spaces
can cause significant issues by creating unintended non-destructible barriers
during gameplay.</p>
<a class="reference internal image-reference" href="../../_images/static_object_collision_06.jpg"><img alt="Example 6 (poor)" class="align-center" src="../../_images/static_object_collision_06.jpg" style="width: 30em;" />
</a>
<p><strong>Example 7 (Poor)</strong>: A large vase with extensive empty spaces included in the
collision mesh is a definite bug.</p>
<div class="sd-container-fluid sd-sphinx-override sd-mb-4 center-grid docutils">
<div class="sd-row sd-row-cols-1 sd-row-cols-xs-1 sd-row-cols-sm-1 sd-row-cols-md-1 sd-row-cols-lg-1 docutils">
<div class="sd-col sd-d-flex-row sd-align-major-center center-cell docutils">
<a class="image-gap reference internal image-reference" href="../../_images/static_object_collision_29.jpg"><img alt="Example 7 (poor)" class="image-gap" src="../../_images/static_object_collision_29.jpg" style="height: 20em;" />
</a>
<a class="reference internal image-reference" href="../../_images/static_object_collision_30.jpg"><img alt="Example 7 (poor)" src="../../_images/static_object_collision_30.jpg" style="height: 20em;" />
</a>
</div>
</div>
</div>
<p><strong>Example 8 (Poor)</strong>: A house wall acts as an occluding object. Even minimal
collision protrusions can cause objects to disappear from rendering. This was a
previously fixed bug and illustrates how a narrow collision strip creates a
real, non-penetrable space despite appearing thin.</p>
<a class="reference internal image-reference" href="../../_images/static_object_collision_31.jpg"><img alt="Example 8 (poor)" class="align-center" src="../../_images/static_object_collision_31.jpg" style="width: 50em;" />
</a>
</section>
<section id="describing-important-parts">
<h3>Describing Important Parts<a class="headerlink" href="#describing-important-parts" title="Link to this heading"></a></h3>
<p>It is essential to distinguish which parts of an object require collision and
which do not.</p>
<p><strong>Example 1</strong>: Small handles on an object do not need collision. They should
neither stop bullets nor cause the object to break unnaturally.</p>
<a class="reference internal image-reference" href="../../_images/static_object_collision_11.jpg"><img alt="Example 1" class="align-center" src="../../_images/static_object_collision_11.jpg" style="width: 20em;" />
</a>
<p><strong>Example 2</strong>: Balcony attachments do not require detailed collision as they are
unlikely to affect gameplay.</p>
<a class="reference internal image-reference" href="../../_images/static_object_collision_22.jpg"><img alt="Example 2" class="align-center" src="../../_images/static_object_collision_22.jpg" style="width: 20em;" />
</a>
<p><strong>Example 3</strong>: There is no need to add collision for small, non-destructible
elements such as broken lamps or decorative insulators.</p>
<a class="reference internal image-reference" href="../../_images/static_object_collision_32.jpg"><img alt="Example 3" class="align-center" src="../../_images/static_object_collision_32.jpg" style="width: 20em;" />
</a>
<p><strong>Example 4</strong>: Very small elements do not require collision.</p>
<a class="reference internal image-reference" href="../../_images/static_object_collision_33.jpg"><img alt="Example 4" class="align-center" src="../../_images/static_object_collision_33.jpg" style="width: 20em;" />
</a>
<p><strong>Example 5</strong>: Apart from the door itself, there is nothing else that requires
collision. Either the object faces the player, making collision details
irrelevant, or it is open with protruding parts against the wall, meaning they
do not impact gameplay.</p>
<div class="sd-container-fluid sd-sphinx-override sd-mb-4 center-grid docutils">
<div class="sd-row sd-row-cols-1 sd-row-cols-xs-1 sd-row-cols-sm-1 sd-row-cols-md-1 sd-row-cols-lg-1 docutils">
<div class="sd-col sd-d-flex-row sd-align-major-center center-cell docutils">
<a class="image-gap reference internal image-reference" href="../../_images/static_object_collision_34.jpg"><img alt="Example 5" class="image-gap" src="../../_images/static_object_collision_34.jpg" style="height: 30em;" />
</a>
<a class="reference internal image-reference" href="../../_images/static_object_collision_35.jpg"><img alt="Example 5" src="../../_images/static_object_collision_35.jpg" style="height: 30em;" />
</a>
</div>
</div>
</div>
</section>
<section id="collision-optimization">
<h3>Collision Optimization<a class="headerlink" href="#collision-optimization" title="Link to this heading"></a></h3>
<p>In addition to the principles outlined above, collisions must be optimized by
using the minimal amount of geometry necessary while still adhering to all
guidelines.</p>
<p>There is no universal rule for this process; the goal is to reduce polygon count
as much as possible without compromising gameplay or bullet interactions.</p>
<p>If you can remove unnecessary polygons without affecting how bullets or players
interact with an object, you should do so.</p>
</section>
</section>
<section id="simple-collisions-box-convex-capsule">
<h2>Simple Collisions: <code class="docutils literal notranslate"><span class="pre">box</span></code>, <code class="docutils literal notranslate"><span class="pre">convex</span></code>, <code class="docutils literal notranslate"><span class="pre">capsule</span></code><a class="headerlink" href="#simple-collisions-box-convex-capsule" title="Link to this heading"></a></h2>
<p>As mentioned earlier, the engine uses three basic types of collision shapes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">box</span></code>: A rectangular collision volume processed as a box rather than a
rectangular mesh. This is the simplest and most efficient collision type.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">convex</span></code>: Convex geometry handled as a convex shape instead of a convex mesh.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">capsule</span></code>: A capsule-shaped collision object.</p></li>
</ul>
<p>The behavior of these collision shapes depends on both the object properties
(see the <a class="reference internal" href="#type-mesh"><code class="docutils literal notranslate"><span class="pre">collision:t=&quot;mesh&quot;</span></code> parameter</a>) and the geometry itself.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>It is important to understand that <strong>simple collision shapes</strong> improve
performance only when applied to entire objects. Using multiple boxes or convex
shapes to approximate a complex object like a table does not optimize
performance. In such cases, it is better to use a standard mesh. However, if the
collision can be described with one or two simple shapes, such as a box, convex,
or capsule, you should do so.</p>
</div>
<section id="box-collision">
<h3>Box Collision<a class="headerlink" href="#box-collision" title="Link to this heading"></a></h3>
<p>Box collision is calculated based on the bounding box of an object, with the
collision type assigned as <code class="docutils literal notranslate"><span class="pre">box</span></code>.</p>
<p>If you rotate a box collision in 3ds Max, it will not rotate in the <a class="reference internal" href="../../dagor-tools/asset-viewer/asset-viewer/asset_viewer.html"><span class="std std-doc">Asset
Viewer</span></a>. Instead,
the bounding box will be recalculated to align with the world axes. You can
scale, move, and manipulate the box’s faces along the axes, but rotating or
moving polygons outside these constraints is not supported.</p>
</section>
<section id="convex-collision">
<h3>Convex Collision<a class="headerlink" href="#convex-collision" title="Link to this heading"></a></h3>
<p>Convex collision is generally simpler to handle but may sometimes behave
unexpectedly in the <a class="reference internal" href="../../dagor-tools/asset-viewer/asset-viewer/asset_viewer.html"><span class="std std-doc">Asset
Viewer</span></a>, even if it
appears correct in 3ds Max. This often indicates the presence of concave
triangles, which can be difficult to detect and usually require reworking the
model’s triangulation.</p>
<a class="reference internal image-reference" href="../../_images/static_object_collision_36.jpg"><img alt="Convex collision" class="align-center" src="../../_images/static_object_collision_36.jpg" style="width: 20em;" />
</a>
<p>Using tools like the MassFX modifier in 3ds Max can simplify this process.</p>
<section id="ds-max-massfx-modifier">
<h4>3ds Max: MassFX modifier<a class="headerlink" href="#ds-max-massfx-modifier" title="Link to this heading"></a></h4>
<p><strong>MassFX Modifier Parameters</strong>:</p>
<ul class="simple">
<li><p><strong>Shape</strong>: Set to <code class="docutils literal notranslate"><span class="pre">convex</span></code> since we are working with convex geometry.</p></li>
<li><p><strong>Generate From</strong>:</p>
<ul>
<li><p><strong>Vertices</strong>: Use this option if you want the collision to fit closely to
the mesh.</p></li>
<li><p><strong>Surface</strong>: Use this option to approximate the mesh with collision.</p></li>
</ul>
</li>
<li><p><strong>Vertices</strong>: Adjusts the vertex count, which affects the polygon count of the
collision mesh.</p></li>
</ul>
<a class="reference internal image-reference" href="../../_images/static_object_collision_37.jpg"><img alt="Convex collision" class="align-center" src="../../_images/static_object_collision_37.jpg" style="width: 55em;" />
</a>
<p>Often, you will need to remove parts of the mesh before generating the convex
collision, especially for complex objects. For example, when creating a
collision for a vase model, removing the handles can simplify the convex hull
around the main body of the vase.</p>
<a class="reference internal image-reference" href="../../_images/static_object_collision_11.jpg"><img alt="Convex collision" class="align-center" src="../../_images/static_object_collision_11.jpg" style="width: 20em;" />
</a>
</section>
<section id="optimizing-convex-collision">
<h4>Optimizing Convex Collision<a class="headerlink" href="#optimizing-convex-collision" title="Link to this heading"></a></h4>
<p>A common misconception is that because convex collisions are computationally
cheaper than mesh collisions, their polygon count is irrelevant. This is not
true. You should always strive to minimize the polygon count of convex
collisions.</p>
<p>For example, creating a 28-triangle convex collision for a small
10-centimeter-high tin can is excessive. Instead, simplify the polygon count to
the minimum necessary for accurate collision handling.</p>
</section>
</section>
<section id="capsule-collision">
<h3>Capsule Collision<a class="headerlink" href="#capsule-collision" title="Link to this heading"></a></h3>
<p>Capsule collisions do not present unique challenges but should follow the same
principles of optimization and appropriate use. Avoid overcomplicating the
geometry when a simple capsule shape is sufficient.</p>
</section>
</section>
<section id="parent-child-collisions">
<h2>Parent-Child Collisions<a class="headerlink" href="#parent-child-collisions" title="Link to this heading"></a></h2>
<p>The engine supports chain destruction with up to two levels of links. You can
designate an object as the parent, and by default, other objects without this
designation become its children.</p>
<p>When a parent object is destroyed, its child objects are destroyed as well. For
example, when a kitchen table breaks, plates placed on it will shatter
accordingly. This behavior is configured through destruction settings and does
not affect the model itself.</p>
<p>However, an important limitation applies: destruction of child objects only
occurs if the child’s collision geometry is fully contained within the bounding
box of the parent object’s collision.</p>
<p>For example, if a plate’s collision is flat and positioned just above the
table’s surface, it will not be destroyed when the table breaks.</p>
<div class="note admonition">
<p class="admonition-title">Key Rule</p>
<p>The collision geometry of any object resting on a destructible object must
extend inside the bounding box of the destructible object for the destruction
chain to function correctly.</p>
</div>
<p>For example, consider the collision geometry of amphoras that rest on
destructible surfaces. Notice how their collision geometry extends downward into
the bounding box of the supporting surface to ensure proper destruction
behavior.</p>
<a class="reference internal image-reference" href="../../_images/static_object_collision_11.jpg"><img alt="Collision geometry extends downward into the bounding box of the supporting surface" class="align-center" src="../../_images/static_object_collision_11.jpg" style="width: 20em;" />
</a>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The chain destruction system operates strictly in one direction: <strong>parent →
child</strong>.</p>
<ul class="simple">
<li><p>Destroying a child object does not affect the parent; the parent remains
intact.</p></li>
<li><p>Destroying a parent object only affects children whose collision geometry
intersects the parent’s bounding box. Children without such intersection will
remain undestroyed.</p></li>
</ul>
<p>Therefore, always designate assets placed on other objects as children, and the
supporting objects as parents. Currently, multi-link destruction chains beyond
two levels are not supported.</p>
</div>
<section id="example-scenarios-of-parent-child-combinations">
<h3>Example Scenarios of Parent-Child Combinations<a class="headerlink" href="#example-scenarios-of-parent-child-combinations" title="Link to this heading"></a></h3>
<div class="sd-container-fluid sd-sphinx-override sd-mb-4 center-grid docutils">
<div class="sd-row sd-row-cols-2 sd-row-cols-xs-2 sd-row-cols-sm-2 sd-row-cols-md-2 sd-row-cols-lg-2 sd-g-2 sd-g-xs-2 sd-g-sm-2 sd-g-md-2 sd-g-lg-2 docutils">
<div class="sd-col sd-d-flex-row sd-align-major-center docutils">
<p><strong>Parent</strong></p>
</div>
<div class="sd-col sd-d-flex-row sd-align-major-center docutils">
<p><strong>Child</strong></p>
</div>
<div class="sd-col sd-d-flex-column center-cell docutils">
<a class="image-gap reference internal image-reference" href="../../_images/static_object_collision_29.jpg"><img alt="Parent" class="image-gap align-center" src="../../_images/static_object_collision_29.jpg" style="height: 20em;" />
</a>
</div>
<div class="sd-col sd-d-flex-column center-cell docutils">
<a class="reference internal image-reference" href="../../_images/static_object_collision_11.jpg"><img alt="Child" class="align-center" src="../../_images/static_object_collision_11.jpg" style="height: 20em;" />
</a>
</div>
</div>
</div>
<p>Below are four examples of parent–child combinations:</p>
<div class="sd-container-fluid sd-sphinx-override sd-mb-4 center-grid docutils">
<div class="sd-row sd-row-cols-4 sd-row-cols-xs-4 sd-row-cols-sm-4 sd-row-cols-md-4 sd-row-cols-lg-4 sd-g-1 sd-g-xs-1 sd-g-sm-1 sd-g-md-1 sd-g-lg-1 docutils">
<div class="sd-col sd-d-flex-column center-cell docutils">
<a class="image-gap reference internal image-reference" href="../../_images/static_object_collision_38.jpg"><img alt="Example 1" class="image-gap align-center" src="../../_images/static_object_collision_38.jpg" style="height: 20em;" />
</a>
</div>
<div class="sd-col sd-d-flex-column center-cell docutils">
<a class="image-gap reference internal image-reference" href="../../_images/static_object_collision_39.jpg"><img alt="Example 2" class="image-gap align-center" src="../../_images/static_object_collision_39.jpg" style="height: 20em;" />
</a>
</div>
<div class="sd-col sd-d-flex-column center-cell docutils">
<a class="image-gap reference internal image-reference" href="../../_images/static_object_collision_40.jpg"><img alt="Example 3" class="image-gap align-center" src="../../_images/static_object_collision_40.jpg" style="height: 20em;" />
</a>
</div>
<div class="sd-col sd-d-flex-column center-cell docutils">
<a class="reference internal image-reference" href="../../_images/static_object_collision_41.jpg"><img alt="Example 4" class="align-center" src="../../_images/static_object_collision_41.jpg" style="height: 20em;" />
</a>
</div>
<div class="sd-col sd-d-flex-row sd-align-major-center docutils">
<p><strong>Example 1:</strong> Correct. The child’s collision (the extended base)
intersects with the parent’s bounding box. Destroying the parent will
also destroy the amphora.</p>
</div>
<div class="sd-col sd-d-flex-row sd-align-major-center docutils">
<p><strong>Example 2:</strong> Also correct. The side collision of the amphora
intersects with the urn’s bounding box. Destroying the urn will break
the amphora.</p>
</div>
<div class="sd-col sd-d-flex-row sd-align-major-center docutils">
<p><strong>Example 3:</strong> Incorrect. The parent object is floating in the air. If
the parent is destroyed, the amphora will also shatter, but if the
amphora is destroyed first, the parent will remain floating.</p>
</div>
<div class="sd-col sd-d-flex-row sd-align-major-center docutils">
<p><strong>Example 4:</strong> Incorrect. Only one amphora (the middle one) intersects
the parent’s bounding box. Destroying the parent will only destroy the
middle amphora, while the upper one will remain suspended in mid-air.</p>
</div>
</div>
</div>
</section>
</section>
<section id="collision-naming-conventions-in-3ds-max">
<h2>Collision Naming Conventions in 3ds Max<a class="headerlink" href="#collision-naming-conventions-in-3ds-max" title="Link to this heading"></a></h2>
<p>Consistent naming is essential for clarity and proper asset processing. Follow
these conventions when naming collision geometry:</p>
<ol class="arabic simple">
<li><p><strong>Use the <code class="docutils literal notranslate"><span class="pre">_cls</span></code> suffix</strong> for all collision objects.</p></li>
<li><p><strong>Base the name on the original 3ds Max object</strong> the collision is intended
for. For example, if the visual object is named <code class="docutils literal notranslate"><span class="pre">table_leg_lod00</span></code>, the
collision object should be named <code class="docutils literal notranslate"><span class="pre">table_leg_cls</span></code>.</p></li>
<li><p><strong>For physical collisions</strong>, add the <code class="docutils literal notranslate"><span class="pre">_phys</span></code> suffix, for example:
<code class="docutils literal notranslate"><span class="pre">table_leg_cls_phys</span></code>.</p></li>
<li><p><strong>For trace collisions</strong>, add the <code class="docutils literal notranslate"><span class="pre">_trace</span></code> suffix, for example:
<code class="docutils literal notranslate"><span class="pre">table_leg_cls_trace</span></code>.</p></li>
</ol>
</section>
<section id="typical-collision-problems-and-pitfalls">
<h2>Typical Collision Problems and Pitfalls<a class="headerlink" href="#typical-collision-problems-and-pitfalls" title="Link to this heading"></a></h2>
<p>The following technical errors in collision geometry can lead to significant
problems:</p>
<ol class="arabic simple">
<li><p><strong>Unclosed geometry</strong> in physical collisions.</p></li>
<li><p><strong>Degenerate triangles</strong>.</p></li>
<li><p><strong>Inverted normals</strong>.</p></li>
<li><p><strong>Missing triangulation</strong> in complex physical collision geometry.</p></li>
</ol>
<section id="unclosed-geometry-in-physical-collisions">
<h3>Unclosed Geometry in Physical Collisions<a class="headerlink" href="#unclosed-geometry-in-physical-collisions" title="Link to this heading"></a></h3>
<p>As previously mentioned, physical collision geometry <strong>must</strong> be closed. There
are no exceptions to this rule.</p>
</section>
<section id="degenerate-triangles">
<h3>Degenerate Triangles<a class="headerlink" href="#degenerate-triangles" title="Link to this heading"></a></h3>
<p>Collisions containing degenerate triangles can cause client crashes when
interacting with characters or players.</p>
<section id="causes">
<h4>Causes<a class="headerlink" href="#causes" title="Link to this heading"></a></h4>
<p>Degenerate triangles arise from:</p>
<ul class="simple">
<li><p>Actual degenerate triangles (collapsed or zero-area triangles).</p></li>
<li><p>Unwelded vertices with duplicate edges.</p></li>
<li><p>Isolated vertices (vertices not connected to any geometry).</p></li>
</ul>
</section>
<section id="detection-methods">
<h4>Detection Methods<a class="headerlink" href="#detection-methods" title="Link to this heading"></a></h4>
<p>Degenerate triangles can be identified through:</p>
<ul>
<li><p><strong>3ds Max export logs</strong>, which flag classic degenerate triangles during the
export process.</p></li>
<li><p><strong>Console output in the Asset Viewer</strong>, which will display errors such as:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>stalingrad_city_balcony_1500x2000_a_collision: degenerate tri 10,13,11:
(0.910, -1.404, 0.731), (0.983, -1.477, 0.731), (0.990, -1.484, 0.731)
(edge len: 0.103137, 0.00999993, 0.113137)
</pre></div>
</div>
</li>
</ul>
</section>
<section id="fixing-methods">
<h4>Fixing Methods<a class="headerlink" href="#fixing-methods" title="Link to this heading"></a></h4>
<p>Degenerate triangles can be resolved through various methods:</p>
<ul>
<li><p><strong>Remove degenerates</strong> using the built-in Dagor Utility.</p>
<a class="reference internal image-reference" href="../../_images/static_object_collision_42.jpg"><img alt="Remove degenerates" class="align-center" src="../../_images/static_object_collision_42.jpg" style="width: 15em;" />
</a>
</li>
<li><p><strong>Weld vertices</strong> with a very small delta (e.g., less than 2 mm) to ensure the
shape of the geometry is not altered.</p></li>
<li><p><strong>Remove isolated vertices</strong> through the remove isolated vertices command.</p></li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Some issues may require manual intervention. For example, long, thin
triangles may not be fixed by automated tools. In such cases, inspect the
coordinates of problematic vertices and manually correct the geometry.</p>
<a class="reference internal image-reference" href="../../_images/static_object_collision_43.jpg"><img alt="Manually correction" class="align-center" src="../../_images/static_object_collision_43.jpg" style="width: 20em;" />
</a>
</div>
</section>
</section>
<section id="inverted-normals">
<h3>Inverted Normals<a class="headerlink" href="#inverted-normals" title="Link to this heading"></a></h3>
<p>Inverted normals in collision geometry can cause characters to stick or appear
to be glued to the surface.</p>
<section id="id1">
<h4>Causes<a class="headerlink" href="#id1" title="Link to this heading"></a></h4>
<p>Inverted normals typically result from:</p>
<ul>
<li><p>Negative scale matrices (even though normals might appear correct in 3ds Max).</p>
<a class="reference internal image-reference" href="../../_images/static_object_collision_44.jpg"><img alt="Remove degenerates" class="align-center" src="../../_images/static_object_collision_44.jpg" style="width: 55em;" />
</a>
</li>
<li><p>Flipped polygons.</p>
<a class="reference internal image-reference" href="../../_images/static_object_collision_45.jpg"><img alt="Remove degenerates" class="align-center" src="../../_images/static_object_collision_45.jpg" style="width: 55em;" />
</a>
</li>
</ul>
</section>
<section id="id2">
<h4>Detection Methods<a class="headerlink" href="#id2" title="Link to this heading"></a></h4>
<section id="flipped-polygons">
<h5>Flipped Polygons<a class="headerlink" href="#flipped-polygons" title="Link to this heading"></a></h5>
<p>Flipped polygons can only be detected visually in 3ds Max; they are not flagged
automatically.</p>
</section>
<section id="inverted-scale-matrices">
<h5>Inverted Scale Matrices<a class="headerlink" href="#inverted-scale-matrices" title="Link to this heading"></a></h5>
<p>Inverted scale matrices can be found in the daBuild logs. Use the following
steps:</p>
<ol class="arabic">
<li><p>Run daBuild (you can run it just for collisions for faster results):</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>../../tools/dagor3_cdk/bin64/dabuild-dev.exe ../application.blk -q -dry_run -only_res -jobs:3 -rebuild:collision collision_pack.grp
</pre></div>
</div>
</li>
<li><p>Locate the daBuild logs</p>
<a class="reference internal image-reference" href="../../_images/static_object_collision_46.jpg"><img alt="Remove degenerates" class="align-center" src="../../_images/static_object_collision_46.jpg" style="width: 15em;" />
</a>
</li>
<li><p>Search for “bad mesh node” entries. Errors will look like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>34.67 [W] geschutz_wagen_rendinst_collision: bad mesh node &quot;Object020&quot; tm={(1.400,0.000,-0.000) (-0.000,-0.000,-1.400) (-0.000,1.400,-0.000) (0.000,0.000,0.000)}
</pre></div>
</div>
</li>
</ol>
</section>
</section>
</section>
<section id="missing-triangulation-in-complex-physical-collisions">
<h3>Missing Triangulation in Complex Physical Collisions<a class="headerlink" href="#missing-triangulation-in-complex-physical-collisions" title="Link to this heading"></a></h3>
<section id="id3">
<h4>Causes<a class="headerlink" href="#id3" title="Link to this heading"></a></h4>
<p>This issue typically occurs when:</p>
<ol class="arabic simple">
<li><p>Complex collision geometry has not been properly triangulated manually.</p></li>
<li><p>The geometry contains unwelded edges or problematic vertices that cannot be
resolved automatically.</p></li>
<li><p>Cut-outs or holes in the collision mesh are left untriangulated, further
compounding the problem.</p></li>
</ol>
<p>These conditions can result in invisible barriers, preventing the player
character from moving through spaces that appear visually unobstructed. The
issue may only occur from certain directions or cause the character to get
temporarily stuck before passing through.</p>
</section>
<section id="id4">
<h4>Detection Methods<a class="headerlink" href="#id4" title="Link to this heading"></a></h4>
<p>Unfortunately, there is no automated way to detect this issue either in-game or
through available tools. The only reliable solution is manual inspection and
correction.</p>
<ol class="arabic">
<li><p><strong>Ensure clean, well-formed physical collision geometry</strong> For example, in the
case of a problematic stair collision, rebuilding the geometry and applying
proper triangulation resolved the movement issue.</p>
<a class="reference internal image-reference" href="../../_images/static_object_collision_47.jpg"><img alt="Example 1" class="align-center" src="../../_images/static_object_collision_47.jpg" style="width: 55em;" />
</a>
</li>
<li><p><strong>Manually triangulate geometry near passageways</strong> While the root cause is
often flawed geometry, manual triangulation in key areas, especially around
tight walkable spaces—can frequently mitigate the problem.</p>
<a class="reference internal image-reference" href="../../_images/static_object_collision_48.jpg"><img alt="Example 2" class="align-center" src="../../_images/static_object_collision_48.jpg" style="width: 55em;" />
</a>
</li>
</ol>
</section>
</section>
</section>
<section id="collision-handling-in-folder-blk">
<h2>Collision Handling in <code class="docutils literal notranslate"><span class="pre">.folder.blk</span></code><a class="headerlink" href="#collision-handling-in-folder-blk" title="Link to this heading"></a></h2>
<p>Collision resources, like all other assets, are processed by the engine through
the <code class="docutils literal notranslate"><span class="pre">.folder.blk</span></code> configuration file. A typical collision processing block looks
like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>virtual_res_blk{
  find:t=&quot;^(.*)\.lod02\.dag$&quot;
  className:t=&quot;collision&quot;
  name:t=&quot;$1_collision&quot;
}
</pre></div>
</div>
<p>In this example, <code class="docutils literal notranslate"><span class="pre">lod02</span></code> refers to the Level of Detail file used for collision.
You can substitute this with any LOD level as needed, depending on where the
collision geometry is placed.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>As of October 2023, the approach to collision processing has changed. We no
longer define individual <code class="docutils literal notranslate"><span class="pre">virtual_res{}</span></code> blocks within <code class="docutils literal notranslate"><span class="pre">.folder.blk</span></code> for
War Thunder and daNetGame-based projects.</p>
<p>Instead, collision processing is handled through pre-configured files located
at: <code class="docutils literal notranslate"><span class="pre">&lt;project_name&gt;/develop/assets/</span></code>.</p>
<p>These files include:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">_ri_collision_lod0_continue.blk</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_ri_collision_lod0_stop.blk</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_ri_collision_lod1.blk</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_ri_collision_lod2.blk</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_ri_collision_lod3.blk</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_unit_collision_dm.blk</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_unit_collision_dynmodel_lod0_continue.blk</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_unit_collision_props.blk</span></code></p></li>
</ul>
<p>Each file contains <code class="docutils literal notranslate"><span class="pre">virtual_res{}</span></code> blocks similar to those used previously,
but now includes additional references to shared configuration files. These
referenced files contain specific parameters required for various collision
types (for example, different settings for render instance collisions versus
unit collisions).</p>
<p>For example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>virtual_res_blk{
  find:t=&quot;^(.*)\.lod02\.dag$&quot;
  className:t=&quot;collision&quot;
  name:t=&quot;$1_collision&quot;
  contents{
    include &quot;#/develop/assets/_ri_collision_props.blk&quot;
  }
}
</pre></div>
</div>
<p>The new system uses predefined include files to configure collision
processing consistently across all assets. These files contain essential
parameters such as:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">collapseAndOptimize:b=yes</span></code>: Enables additional geometry optimization and
compression during packaging.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buildFRT:b=yes</span></code>: Enables building for the FastRayTracer.</p></li>
</ul>
<p>The exact parameters are less important than the fact that they are
automatically applied to all render instance collisions via these include
files. To maintain this behavior <strong>do not manually define collision
processing using</strong> <code class="docutils literal notranslate"><span class="pre">virtual_res{}</span></code> <strong>blocks anymore</strong>.</p>
<p>To include collision processing for a specific LOD, simply add the relevant
include file to your <code class="docutils literal notranslate"><span class="pre">.folder.blk</span></code>. For example:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>include &quot;#/develop/assets/_ri_collision_lod1.blk&quot;
</pre></div>
</div>
<p>Replace the file name as needed depending on which LOD level you are working
with. This line can be placed anywhere in the <code class="docutils literal notranslate"><span class="pre">.folder.blk</span></code> file and does
not require a <code class="docutils literal notranslate"><span class="pre">virtual_res{}</span></code> block.</p>
<p>This approach ensures consistency, reduces redundancy, and aligns with the
current asset pipeline.</p>
</div>
<section id="usage-examples">
<h3>Usage Examples<a class="headerlink" href="#usage-examples" title="Link to this heading"></a></h3>
<p><strong>Exclusion Example:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>include &quot;#/develop/assets/_ri_collision_lod2.blk&quot;
&quot;@override-last&quot;{ exclude:t =&quot;^(.*sign.*)\.lod02\.dag$&quot;; }
</pre></div>
</div>
<p><strong>Name-Based Search Example:</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>include &quot;#/develop/assets/_ri_collision_lod1.blk&quot;
&quot;@override-last&quot;{ &quot;@override:find&quot;:t=&quot;^(.*pos_a.*|.*pos_b.*|.*pos_c.*|.*sign.*)\.lod01\.dag$&quot;; }
</pre></div>
</div>
<p>In both cases, we use <code class="docutils literal notranslate"><span class="pre">&#64;override-last</span></code> to modify the behavior of the previously
included blocks, allowing for custom exclusions or searches based on specific
patterns.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Collisions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../lighting/index.html" class="btn btn-neutral float-right" title="Lighting" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Gaijin Entertainment 2025.
      <span class="lastupdated">Last updated on Oct 04, 2025.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>