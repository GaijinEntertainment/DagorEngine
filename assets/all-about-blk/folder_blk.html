

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>.folder.blk</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=55b73dce" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster.custom.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster.bundle.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-shadow.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-punk.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-noir.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-light.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-borderless.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/micromodal.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/sphinx_rtd_theme.css?v=3234e928" />
      <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css?v=6ad1a40c" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=fe408b2f" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/js/hoverxref.js"></script>
      <script src="../../_static/js/tooltipster.bundle.min.js"></script>
      <script src="../../_static/js/micromodal.min.js"></script>
      <script src="../../_static/js/versionwarning.js?v=d4224a34"></script>
      <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../_static/copybutton.js?v=f281be69"></script>
      <script src="../../_static/design-tabs.js?v=36754332"></script>
      <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title=".skeleton.blk" href="skeleton_blk.html" />
    <link rel="prev" title=".config.blk and .settings.blk" href="config_and_settings_blk.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Dagor Documentation
              <img src="../../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../dagor-home/index.html">Dagor Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.html">Getting Started with Dagor</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Assets and Assets Management</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../about-assets/index.html">Assets</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">All About <code class="docutils literal notranslate"><span class="pre">.blk</span></code> Files</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="application_blk.html"><code class="docutils literal notranslate"><span class="pre">application.blk</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="composit_blk.html"><code class="docutils literal notranslate"><span class="pre">.composit.blk</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="config_and_settings_blk.html"><code class="docutils literal notranslate"><span class="pre">.config.blk</span></code> and <code class="docutils literal notranslate"><span class="pre">.settings.blk</span></code></a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">.folder.blk</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#blk-file-types"><code class="docutils literal notranslate"><span class="pre">.blk</span></code> File Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="#syntax-of-folder-blk">Syntax of <code class="docutils literal notranslate"><span class="pre">.folder.blk</span></code></a><ul>
<li class="toctree-l5"><a class="reference internal" href="#general-principles">General Principles</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#asset-scanning-and-export-rules">Asset Scanning and Export Rules</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#basic-parameters">Basic parameters</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#export-block-export">Export Block: <code class="docutils literal notranslate"><span class="pre">Export{}</span></code></a><ul>
<li class="toctree-l7"><a class="reference internal" href="#id1">Basic Parameters</a></li>
<li class="toctree-l7"><a class="reference internal" href="#optional-parameters">Optional Parameters</a></li>
<li class="toctree-l7"><a class="reference internal" href="#special-keywords">Special Keywords</a></li>
<li class="toctree-l7"><a class="reference internal" href="#explanations">Explanations</a></li>
</ul>
</li>
<li class="toctree-l6"><a class="reference internal" href="#virtual-resource-block-virtual-res">Virtual Resource Block: <code class="docutils literal notranslate"><span class="pre">virtual_res{}</span></code></a><ul>
<li class="toctree-l7"><a class="reference internal" href="#key-parameters">Key Parameters</a></li>
</ul>
</li>
<li class="toctree-l6"><a class="reference internal" href="#specialized-blocks-content-tag">Specialized Blocks: <code class="docutils literal notranslate"><span class="pre">content{}</span></code>, <code class="docutils literal notranslate"><span class="pre">tag{}</span></code></a></li>
<li class="toctree-l6"><a class="reference internal" href="#additional-details">Additional Details</a></li>
<li class="toctree-l6"><a class="reference internal" href="#common-parameters-for-most-assets">Common Parameters for Most Assets</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#using-regexp-rules">Using Regexp Rules</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#regular-expression-patterns">Regular Expression Patterns</a></li>
<li class="toctree-l5"><a class="reference internal" href="#regular-expression-symbols-explained">Regular Expression Symbols Explained</a></li>
<li class="toctree-l5"><a class="reference internal" href="#processing-control">Processing Control</a></li>
<li class="toctree-l5"><a class="reference internal" href="#examples">Examples</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#rendering-and-prefab-creation">Rendering and Prefab Creation</a></li>
<li class="toctree-l6"><a class="reference internal" href="#texture-processing">Texture Processing</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="skeleton_blk.html"><code class="docutils literal notranslate"><span class="pre">.skeleton.blk</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="spline_blk.html"><code class="docutils literal notranslate"><span class="pre">spline.blk</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../animations/index.html">Animations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../collisions/index.html">Collisions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lighting/index.html">Lighting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../materials/index.html">Materials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../shaders/index.html">Shaders</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../dagor-tools/index.html">Dagor Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../projects/index.html">Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials and Manuals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api-references/index.html">API References and Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Dagor Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Assets and Assets Management</a></li>
          <li class="breadcrumb-item"><a href="index.html">All About <code class="docutils literal notranslate"><span class="pre">.blk</span></code> Files</a></li>
      <li class="breadcrumb-item active"><code class="docutils literal notranslate"><span class="pre">.folder.blk</span></code></li>
  
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/assets/all-about-blk/folder_blk.md.txt" rel="nofollow"> View page source</a>
      </li>
  <li class="wy-breadcrumbs-aside.github-icon">
    <a href="https://github.com/GaijinEntertainment/DagorEngine" target="_blank" rel="noopener">
      <img src="../../_static/_images/github-mark.png"
           alt="GitHub"
           style="height: 1.5em; vertical-align: text-bottom; " />
    </a>
  </li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="folder-blk">
<h1><code class="docutils literal notranslate"><span class="pre">.folder.blk</span></code><a class="headerlink" href="#folder-blk" title="Link to this heading"></a></h1>
<section id="blk-file-types">
<h2><code class="docutils literal notranslate"><span class="pre">.blk</span></code> File Types<a class="headerlink" href="#blk-file-types" title="Link to this heading"></a></h2>
<p>The <a class="reference internal" href="../../dagor-tools/blk/blk.html#blk-file-format"><span class="std std-ref"><code class="docutils literal notranslate"><span class="pre">.blk</span></code> files</span></a> interacting
with assets (all types of resources in Dagor Engine can be categorized into:</p>
<ul class="simple">
<li><p>resource <code class="docutils literal notranslate"><span class="pre">.&lt;className&gt;.blk</span></code> file types – the <code class="docutils literal notranslate"><span class="pre">.blk</span></code> files that process the
asset itself (extract collision, animation, create destruction, etc.) to
create a game resource of a certain class. A list of supported resources in
your project can be found in <code class="docutils literal notranslate"><span class="pre">application.blk</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">composit.blk</span></code> – the <code class="docutils literal notranslate"><span class="pre">.blk</span></code> files that describe the handling of the final game
resource (composites).</p></li>
</ul>
<p>We will focus on <code class="docutils literal notranslate"><span class="pre">.&lt;className&gt;.blk</span></code> files in more detail.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>For more information about composite files, see
<a class="reference internal" href="composit_blk.html"><span class="std std-doc">.composit.blk</span></a>.</p>
</div>
<p>After exporting from 3ds Max, we usually obtain a <code class="docutils literal notranslate"><span class="pre">.dag</span></code> file or a <code class="docutils literal notranslate"><span class="pre">.tif</span></code> file
in the case of textures. These files are inert and cannot be used without the
engine’s tools, and the engine needs instructions on how to handle them.</p>
<p>This is where <code class="docutils literal notranslate"><span class="pre">.&lt;className&gt;.blk</span></code> files come into play. They define the
processing parameters for assets, turning them into “virtual” resources. From a
single <code class="docutils literal notranslate"><span class="pre">.dag</span></code> file, we can generate an Level of Detail (LOD), collision,
skeleton, and more, provided the necessary objects and properties are included.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">.&lt;className&gt;.blk</span></code> files must be named according to the final resource name
in the game (in the <a class="reference internal" href="../../dagor-tools/asset-viewer/asset-viewer/asset_viewer.html"><span class="std std-doc">Asset
Viewer</span></a>) and must
contain the asset type (<code class="docutils literal notranslate"><span class="pre">&lt;className&gt;</span></code>) in the filename, as it contains semantics
that are used later in config interpretation.</p>
<p>For example:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">hangar_watch_tower_d.rendinst.blk</span></code> – game resource <code class="docutils literal notranslate"><span class="pre">hangar_watch_tower_d</span></code>
(rendinst).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hangar_watch_tower_d.blk</span></code> – same as above, but it can be a rendinst or prefab
(defined within the file).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hangar_watch_tower_d_collision.collision.blk</span></code> – game resource.
<code class="docutils literal notranslate"><span class="pre">hangar_watch_tower_d_collision</span></code> – collision.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">airfield_workshop_a_overlay.tex.blk</span></code> – game resource.
<code class="docutils literal notranslate"><span class="pre">airfield_workshop_a_overlay</span></code> – texture.</p></li>
</ul>
<p>To avoid manually creating a <code class="docutils literal notranslate"><span class="pre">.blk</span></code> file for every simple asset, such as <code class="docutils literal notranslate"><span class="pre">.dag</span></code>,
textures, skeletons, animations, dynamic models, etc., Dagor supports a highly
flexible system for creating virtual assets.</p>
<p><code class="docutils literal notranslate"><span class="pre">.folder.blk</span></code> is a type of resource <code class="docutils literal notranslate"><span class="pre">.&lt;className&gt;.blk</span></code> files that process assets
in batches.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">.folder.blk</span></code> file places in the assets directory and in most cases, it is
sufficient to simply place textures and models in the appropriate directories.
All numerous rules, such as LOD switching distances, texture conversion rules,
etc., will be created automatically.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Resources must be uniquely named. In most cases, everything works fine if
resources are uniquely named within their type, but it is preferable to have a
fully unique name.</p>
</div>
</section>
<section id="syntax-of-folder-blk">
<h2>Syntax of <code class="docutils literal notranslate"><span class="pre">.folder.blk</span></code><a class="headerlink" href="#syntax-of-folder-blk" title="Link to this heading"></a></h2>
<section id="general-principles">
<h3>General Principles<a class="headerlink" href="#general-principles" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">.folder.blk</span></code> file defines how and where assets are exported, how they are
found, and the rules for creating virtual resource <code class="docutils literal notranslate"><span class="pre">.&lt;className&gt;.blk</span></code> files.</p>
<p>For assets, the <code class="docutils literal notranslate"><span class="pre">.&lt;className&gt;.blk</span></code> rules are always applied first if they exist
(i.e., if <code class="docutils literal notranslate"><span class="pre">my_asset.dynmodel.blk</span></code> exists, the rule for creating an asset named
<code class="docutils literal notranslate"><span class="pre">my_asset</span></code> will not be executed). Afterward, the rules from the <code class="docutils literal notranslate"><span class="pre">.folder.blk</span></code>
file next to the asset are applied, followed by the rules from <code class="docutils literal notranslate"><span class="pre">.folder.blk</span></code>
files higher in the directory hierarchy until a <code class="docutils literal notranslate"><span class="pre">stopProcessing:b=true</span></code>
directive is encountered.</p>
<p>To understand which rules apply to your file (e.g., <code class="docutils literal notranslate"><span class="pre">my_texture.tif</span></code> or
<code class="docutils literal notranslate"><span class="pre">my_model.dag</span></code>), start from the directory where the asset is located and look
for the nearest <code class="docutils literal notranslate"><span class="pre">.folder.blk</span></code> file up the hierarchy.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>For more information, see
<a class="reference internal" href="../../dagor-tools/blk/blk.html#blk-file-format"><span class="std std-ref">BLK File Format</span></a>.</p>
</div>
</section>
</section>
<section id="asset-scanning-and-export-rules">
<h2>Asset Scanning and Export Rules<a class="headerlink" href="#asset-scanning-and-export-rules" title="Link to this heading"></a></h2>
<section id="basic-parameters">
<h3>Basic parameters<a class="headerlink" href="#basic-parameters" title="Link to this heading"></a></h3>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">inherit_rules:b=true\false</span></code>: apply the rules from <code class="docutils literal notranslate"><span class="pre">.folder.blk</span></code> higher up the
hierarchy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scan_assets:b=true\false</span></code>: scan assets in this directory.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scan_folders:b=true\false</span></code>: scan subdirectories in this directory.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exported:b=true\false</span></code>: whether the content is exported to the game.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>It is highly recommended to use a special directory with checkboxes if you are
going to make test assets that you want to commit and pass on to others, but
not include for everyone.</p>
</div>
</li>
</ul>
<section id="export-block-export">
<h4>Export Block: <code class="docutils literal notranslate"><span class="pre">Export{}</span></code><a class="headerlink" href="#export-block-export" title="Link to this heading"></a></h4>
<p>The export parameters can be specified either directly through names or via
<a class="reference internal" href="#special-keywords">special keywords</a>.</p>
<section id="id1">
<h5>Basic Parameters<a class="headerlink" href="#id1" title="Link to this heading"></a></h5>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">ddsxTexPack:t=&quot;&quot;</span></code>: defines the name or texture packs for the current
directory and all nested directories, unless overridden by another rule,
possible values: &lt;pack_name&gt;, special keyword.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gameResPack:t=&quot;&quot;</span></code>: defines the name of resource packs for the current
directory and all nested directories, unless overridden by another rule,
possible values: &lt;pack_name&gt;, special keyword.</p>
<p><strong>Examples</strong>:</p>
<div class="highlight-blk notranslate"><div class="highlight"><pre><span></span><span class="no">ddsxTexPack</span><span class="nt">:t=</span><span class="nf">&quot;combat_suits.dxp.bin&quot;</span>
<span class="no">gameResPack</span><span class="nt">:t=</span><span class="nf">&quot;combat_suits.grp&quot;</span>
</pre></div>
</div>
<div class="highlight-blk notranslate"><div class="highlight"><pre><span></span><span class="no">ddsxTexPack</span><span class="nt">:t=</span><span class="nf">&quot;*name_src&quot;</span>
<span class="no">gameResPack</span><span class="nt">:t=</span><span class="nf">&quot;*name_src&quot;</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="optional-parameters">
<h5>Optional Parameters<a class="headerlink" href="#optional-parameters" title="Link to this heading"></a></h5>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">ddsxTexPackPrefix:t=&quot;&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">gameResPackPrefix:t=&quot;&quot;</span></code>: defines the prefix
before the package name, possible values: prefix.</p>
<p><strong>Example</strong>:</p>
<div class="highlight-blk notranslate"><div class="highlight"><pre><span></span><span class="no">ddsxTexPackPrefix</span><span class="nt">:t=</span><span class="nf">&quot;aircrafts/&quot;</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">package:t=&quot;&quot;</span></code>: defines the name of additional resource packs, possible
values: &lt;pack_name&gt; or <code class="docutils literal notranslate"><span class="pre">*</span></code> means put in root pack (default value).</p>
<p><strong>Examples</strong>:</p>
<div class="highlight-blk notranslate"><div class="highlight"><pre><span></span><span class="no">package</span><span class="nt">:t=</span><span class="nf">&quot;outer_space&quot;</span>
</pre></div>
</div>
<div class="highlight-blk notranslate"><div class="highlight"><pre><span></span><span class="no">package</span><span class="nt">:t=</span><span class="nf">&quot;*&quot;</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="special-keywords">
<h5>Special Keywords<a class="headerlink" href="#special-keywords" title="Link to this heading"></a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">*name_src</span></code>: the name of the directory containing the <strong>asset</strong> will be used
as the pack name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*path_src</span></code>: the path to the directory containing the <strong>asset</strong> will be used
as the pack name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*name</span></code>: the name of the directory containing the <code class="docutils literal notranslate"><span class="pre">.folder.blk</span></code> file will be
used as the pack name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*path</span></code>: the path to the directory containing the <code class="docutils literal notranslate"><span class="pre">.folder.blk</span></code> file will be
used as the pack name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*parent</span></code>: the name of the parent directory will be used as the pack name.</p></li>
</ul>
</section>
<section id="explanations">
<h5>Explanations<a class="headerlink" href="#explanations" title="Link to this heading"></a></h5>
<ol class="arabic simple">
<li><p>For example, for this file structure:</p></li>
</ol>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>  dir_1
  ├─ .folder.blk
  └─ dir_2
      └─ asset
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">*name_src</span></code>, <code class="docutils literal notranslate"><span class="pre">*path_src</span></code>: the <code class="docutils literal notranslate"><span class="pre">dir_2</span></code> name (or <code class="docutils literal notranslate"><span class="pre">dir_1/dir_2</span></code> path) will be
used as the pack name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*name</span></code>, <code class="docutils literal notranslate"><span class="pre">*path</span></code>: the <code class="docutils literal notranslate"><span class="pre">dir_1</span></code> name (or <code class="docutils literal notranslate"><span class="pre">dir_1</span></code> path) will be used as the
pack name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*parent</span></code>: the <code class="docutils literal notranslate"><span class="pre">dir_1</span></code> name will be used as the pack name.</p></li>
</ul>
<ol class="arabic simple" start="2">
<li><p>This is how the <code class="docutils literal notranslate"><span class="pre">*parent</span></code> key works:</p></li>
</ol>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="sc">&#39;*&#39;</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="sc">&#39;/&#39;</span><span class="p">)</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">prefix</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">p</span><span class="p">;</span>
<span class="w">      </span><span class="n">buf</span><span class="p">.</span><span class="n">printf</span><span class="p">(</span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;%s%s&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">prefix</span><span class="p">,</span><span class="w"> </span><span class="n">p</span><span class="p">);</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">buf</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">stricmp</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;*parent&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="n">fidx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mgr</span><span class="p">.</span><span class="n">getFolder</span><span class="p">(</span><span class="n">fidx</span><span class="p">).</span><span class="n">parentIdx</span><span class="p">;</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">fidx</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">-1</span><span class="p">)</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mgr</span><span class="p">.</span><span class="n">getFolder</span><span class="p">(</span><span class="n">fidx</span><span class="p">).</span><span class="n">exportProps</span><span class="p">.</span><span class="n">getStr</span><span class="p">(</span><span class="n">paramName</span><span class="p">,</span><span class="w"> </span><span class="n">def_val</span><span class="p">);</span>
<span class="w">        </span><span class="k">continue</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">      </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="w">      </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">stricmp</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;*name&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="n">buf</span><span class="p">.</span><span class="n">printf</span><span class="p">(</span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;%s%s%s&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">prefix</span><span class="p">,</span><span class="w"> </span><span class="n">mgr</span><span class="p">.</span><span class="n">getFolder</span><span class="p">(</span><span class="n">fidx</span><span class="p">).</span><span class="n">folderName</span><span class="p">.</span><span class="n">str</span><span class="p">(),</span><span class="w"> </span><span class="n">pack_suffix</span><span class="p">);</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">buf</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">stricmp</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;*name_src&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="n">buf</span><span class="p">.</span><span class="n">printf</span><span class="p">(</span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;%s%s%s&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">prefix</span><span class="p">,</span><span class="w"> </span><span class="n">mgr</span><span class="p">.</span><span class="n">getFolder</span><span class="p">(</span><span class="n">src_fidx</span><span class="p">).</span><span class="n">folderName</span><span class="p">.</span><span class="n">str</span><span class="p">(),</span><span class="w"> </span><span class="n">pack_suffix</span><span class="p">);</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">buf</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">stricmp</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;*path&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="n">makeRelFolderPath</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="n">mgr</span><span class="p">,</span><span class="w"> </span><span class="n">fidx</span><span class="p">);</span>
<span class="w">      </span><span class="n">buf2</span><span class="p">.</span><span class="n">printf</span><span class="p">(</span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;%s%s%s&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">prefix</span><span class="p">,</span><span class="w"> </span><span class="n">buf</span><span class="p">.</span><span class="n">str</span><span class="p">(),</span><span class="w"> </span><span class="n">pack_suffix</span><span class="p">);</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">buf2</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">stricmp</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;*path_src&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="n">makeRelFolderPath</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="n">mgr</span><span class="p">,</span><span class="w"> </span><span class="n">src_fidx</span><span class="p">);</span>
<span class="w">      </span><span class="n">buf2</span><span class="p">.</span><span class="n">printf</span><span class="p">(</span><span class="mi">260</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;%s%s%s&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">prefix</span><span class="p">,</span><span class="w"> </span><span class="n">buf</span><span class="p">.</span><span class="n">str</span><span class="p">(),</span><span class="w"> </span><span class="n">pack_suffix</span><span class="p">);</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">buf2</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="virtual-resource-block-virtual-res">
<h4>Virtual Resource Block: <code class="docutils literal notranslate"><span class="pre">virtual_res{}</span></code><a class="headerlink" href="#virtual-resource-block-virtual-res" title="Link to this heading"></a></h4>
<p>Virtual resource blocks <code class="docutils literal notranslate"><span class="pre">virtual_res{}</span></code> are used to create assets. They are
applied sequentially from top to bottom within a <code class="docutils literal notranslate"><span class="pre">.folder.blk</span></code> file, and then
from <code class="docutils literal notranslate"><span class="pre">.folder.blk</span></code> files higher in the directory hierarchy, until a
<code class="docutils literal notranslate"><span class="pre">stopProcessing:b=true</span></code> directive is encountered or all <code class="docutils literal notranslate"><span class="pre">.folder.blk</span></code> files in
the hierarchy are processed.</p>
<div class="highlight-blk notranslate"><div class="highlight"><pre><span></span><span class="se">virtual_res_blk</span><span class="ni">{</span>
  <span class="no">find</span><span class="nt">:t=</span><span class="nf">&quot;^(.*)\.dds$&quot;</span>
  <span class="no">exclude</span><span class="nt">:t=</span><span class="nf">&quot;^(.*_nm)\.dds$&quot;</span>
  <span class="no">className</span><span class="nt">:t=</span><span class="nf">&quot;tex&quot;</span>
  <span class="no">name</span><span class="nt">:t=</span><span class="nf">&quot;low_$1&quot;</span>
  <span class="no">stopProcessing</span><span class="nt">:b=</span><span class="si">false</span>
  <span class="se">contents</span><span class="ni">{}</span>
<span class="ni">}</span>
</pre></div>
</div>
<section id="key-parameters">
<h5>Key Parameters<a class="headerlink" href="#key-parameters" title="Link to this heading"></a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">find</span></code>: A regular expression to locate files for which the virtual resource
<code class="docutils literal notranslate"><span class="pre">.&lt;className&gt;.blk</span></code> will be created.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exclude</span></code>: A regular expression for excluding files that match the <code class="docutils literal notranslate"><span class="pre">find</span></code>
pattern.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">className</span></code>: Specifies the type of asset in your project.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: The asset’s name. By default, this corresponds to the first capturing
group in the <code class="docutils literal notranslate"><span class="pre">find</span></code> pattern (<code class="docutils literal notranslate"><span class="pre">name:t=&quot;$1&quot;</span></code>). You can construct the name using
values from capturing groups (<span class="math notranslate nohighlight">\(1 ... \)</span>9) and other characters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stopProcessing</span></code>: Defaults to <code class="docutils literal notranslate"><span class="pre">true</span></code>, meaning no further <code class="docutils literal notranslate"><span class="pre">virtual</span> <span class="pre">res</span> <span class="pre">blk</span></code>
rules will be applied to the matched file. Set to <code class="docutils literal notranslate"><span class="pre">false</span></code> if you want to
create multiple assets (e.g., dynamic model, render instance, prefab,
skeleton, character) from one texture/model.</p></li>
</ul>
<p>All other parameters are specified within the <code class="docutils literal notranslate"><span class="pre">contents{}</span></code> block and are
typically specific to the asset type.</p>
</section>
</section>
<section id="specialized-blocks-content-tag">
<h4>Specialized Blocks: <code class="docutils literal notranslate"><span class="pre">content{}</span></code>, <code class="docutils literal notranslate"><span class="pre">tag{}</span></code><a class="headerlink" href="#specialized-blocks-content-tag" title="Link to this heading"></a></h4>
<p>Within the <code class="docutils literal notranslate"><span class="pre">contents{}</span></code> block, you can include specialization blocks based on
<em>tags</em>. Tags are generated from all directory names in the full path to the file
(excluding the base asset path).</p>
<p>For example, for <code class="docutils literal notranslate"><span class="pre">develop/assets/test/warthunder/model/abc.tif</span></code>, the tags would
be <code class="docutils literal notranslate"><span class="pre">test</span></code>, <code class="docutils literal notranslate"><span class="pre">warthunder</span></code>, and <code class="docutils literal notranslate"><span class="pre">model</span></code>. Specialization block names follow the
format <code class="docutils literal notranslate"><span class="pre">tag:TTT{}</span></code>, such as:</p>
<div class="highlight-blk notranslate"><div class="highlight"><pre><span></span><span class="se">contents</span><span class="ni">{</span>
  <span class="no">hqMip</span><span class="nt">:i=</span><span class="m">1</span>
  <span class="ge">//...</span>
  <span class="nf">&quot;tag:warthunder&quot;</span><span class="ni">{</span>
    <span class="no">hqMip</span><span class="nt">:i=</span><span class="m">0</span>
  <span class="ni">}</span>
<span class="ni">}</span>
</pre></div>
</div>
<p>If applicable specialization blocks are present (i.e., the full path contains
the specified tags), their contents are merged into the main <code class="docutils literal notranslate"><span class="pre">contents{}</span></code> for
the asset. If multiple specialization blocks apply, their contents are merged in
the order they appear within the <code class="docutils literal notranslate"><span class="pre">contents{}</span></code> block.</p>
<p>This approach allows for different properties to be set for similar assets
located in various directories with specific names, without duplicating the
<code class="docutils literal notranslate"><span class="pre">.folder.blk</span></code>.</p>
</section>
<section id="additional-details">
<h4>Additional Details<a class="headerlink" href="#additional-details" title="Link to this heading"></a></h4>
<p>Typically, virtual assets do not need to specify the file name for the resource
parameter (such as the texture name or <code class="docutils literal notranslate"><span class="pre">.dag</span></code> file). These are passed by default
and equal to the name of the file from which the resource is created. However,
you can specify a different file if needed (e.g., creating a dynamic model from
<code class="docutils literal notranslate"><span class="pre">my_dynmodel.txt</span></code> with a reference to <code class="docutils literal notranslate"><span class="pre">dag_my_dynmodel.lod00.dag</span></code>).</p>
</section>
<section id="common-parameters-for-most-assets">
<h4>Common Parameters for Most Assets<a class="headerlink" href="#common-parameters-for-most-assets" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ddsxTexPack:t</span></code>, <code class="docutils literal notranslate"><span class="pre">gameResPack:t</span></code>, <code class="docutils literal notranslate"><span class="pre">package:t=</span></code>: See
<a class="reference internal" href="#id1">above</a> for details.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">export_PC:b</span></code>: Whether to export the asset for the specified platform
(substitute <code class="docutils literal notranslate"><span class="pre">PC</span></code> with any 4-character platform code: <code class="docutils literal notranslate"><span class="pre">_PS4</span></code>, <code class="docutils literal notranslate"><span class="pre">_and</span></code>, <code class="docutils literal notranslate"><span class="pre">ios</span></code>,
<code class="docutils literal notranslate"><span class="pre">PS3</span></code>, etc.).</p></li>
</ul>
</section>
</section>
</section>
<section id="using-regexp-rules">
<h2>Using Regexp Rules<a class="headerlink" href="#using-regexp-rules" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Regular_expression">Regular expressions</a> are used
in <code class="docutils literal notranslate"><span class="pre">.folder.blk</span></code> for resource generation, which starts with internal
subdirectories, not external ones.</p>
<section id="regular-expression-patterns">
<h3>Regular Expression Patterns<a class="headerlink" href="#regular-expression-patterns" title="Link to this heading"></a></h3>
<ol class="arabic">
<li><p><strong>LOD Files</strong></p>
<div class="highlight-blk notranslate"><div class="highlight"><pre><span></span><span class="no">find</span><span class="nt">:t=</span><span class="nf">&quot;^(.*)\.lod00\.dag$&quot;</span>
</pre></div>
</div>
</li>
<li><p><strong>Texture and Mask Files</strong></p>
<div class="highlight-blk notranslate"><div class="highlight"><pre><span></span><span class="no">find</span><span class="nt">:t=</span><span class="nf">&quot;^((.*_mask)|(.*_tex_m))\.tif$&quot;</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="regular-expression-symbols-explained">
<h3>Regular Expression Symbols Explained<a class="headerlink" href="#regular-expression-symbols-explained" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">^</span></code>: Asserts the position at the start of the line.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.</span></code>: Matches any single character except for line terminators.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*</span></code>: Matches the preceding element zero or more times.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\</span></code>: Escapes the following character, treating it as a literal.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$</span></code>: Asserts the position at the end of the line.</p></li>
</ul>
</section>
<section id="processing-control">
<h3>Processing Control<a class="headerlink" href="#processing-control" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">stopProcessing:b=false</span></code>: Indicates whether to continue processing or
reprocess the already found and processed items.</p></li>
</ul>
</section>
<section id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Link to this heading"></a></h3>
<section id="rendering-and-prefab-creation">
<h4>Rendering and Prefab Creation<a class="headerlink" href="#rendering-and-prefab-creation" title="Link to this heading"></a></h4>
<p>To generate renderings from <code class="docutils literal notranslate"><span class="pre">.lod00.dag</span></code> files and create prefabs from them,
use:</p>
<div class="highlight-blk notranslate"><div class="highlight"><pre><span></span><span class="no">find</span><span class="nt">:t=</span><span class="nf">&quot;^(.*)\.lod00\.dag$&quot;</span>
</pre></div>
</div>
</section>
<section id="texture-processing">
<h4>Texture Processing<a class="headerlink" href="#texture-processing" title="Link to this heading"></a></h4>
<p>To find and process all files matching <code class="docutils literal notranslate"><span class="pre">&quot;^(.*_n\.tif$&quot;</span></code> and convert them to
<code class="docutils literal notranslate"><span class="pre">.dds</span></code> format with swizzling, then process all remaining <code class="docutils literal notranslate"><span class="pre">.tif</span></code> files:</p>
<div class="highlight-blk notranslate"><div class="highlight"><pre><span></span><span class="se">virtual_res_blk</span><span class="ni">{</span>
  <span class="no">find</span><span class="nt">:t=</span><span class="nf">&quot;^(.*_n(_dmg|_expl|_inside)?)\.tif$&quot;</span>
  <span class="no">swizzleARGB</span><span class="nt">:t=</span><span class="nf">&quot;RAG0&quot;</span>
<span class="ni">}</span>

<span class="se">virtual_res_blk</span><span class="ni">{</span>
  <span class="no">find</span><span class="nt">:t=</span><span class="nf">&quot;^(.*)\.tif$&quot;</span>
  <span class="no">convert</span><span class="nt">:b=</span><span class="si">yes</span><span class="gp">;</span> <span class="no">fmt</span><span class="nt">:t=</span><span class="nf">&quot;DXT1|DXT5&quot;</span>
<span class="ni">}</span>
</pre></div>
</div>
<p>These examples demonstrate how to use regular expressions to find specific file
types and perform various actions on them within the <code class="docutils literal notranslate"><span class="pre">.folder.blk</span></code> framework.</p>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="config_and_settings_blk.html" class="btn btn-neutral float-left" title=".config.blk and .settings.blk" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="skeleton_blk.html" class="btn btn-neutral float-right" title=".skeleton.blk" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Gaijin Entertainment 2025.
      <span class="lastupdated">Last updated on Nov 18, 2025.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>