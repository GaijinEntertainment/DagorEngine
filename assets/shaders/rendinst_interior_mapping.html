

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>rendinst_interior_mapping</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster.custom.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster.bundle.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-shadow.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-punk.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-noir.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-light.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-borderless.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/micromodal.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/sphinx_rtd_theme.css?v=3234e928" />
      <link rel="stylesheet" type="text/css" href="../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css?v=6ad1a40c" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=fe408b2f" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/js/hoverxref.js"></script>
      <script src="../../_static/js/tooltipster.bundle.min.js"></script>
      <script src="../../_static/js/micromodal.min.js"></script>
      <script src="../../_static/js/versionwarning.js?v=d4224a34"></script>
      <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../_static/copybutton.js?v=f281be69"></script>
      <script src="../../_static/design-tabs.js?v=36754332"></script>
      <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="rendinst_layered" href="rendinst_layered.html" />
    <link rel="prev" title="Shaders" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Dagor Documentation
              <img src="../../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../dagor-home/index.html">Dagor Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.html">Getting Started with Dagor</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Assets and Assets Management</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../about-assets/index.html">Assets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../all-about-blk/index.html">All About <code class="docutils literal notranslate"><span class="pre">.blk</span></code> Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../animations/index.html">Animations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../collisions/index.html">Collisions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lighting/index.html">Lighting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../materials/index.html">Materials</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Shaders</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">rendinst_interior_mapping</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#asset-requirements">Asset Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#shader-setup">Shader Setup</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#textures">Textures</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id1">Parameters</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#cubemap-fading">Cubemap Fading</a></li>
<li class="toctree-l6"><a class="reference internal" href="#smoothness-metalness-and-reflection">Smoothness, Metalness, and Reflection</a></li>
<li class="toctree-l6"><a class="reference internal" href="#room-proportion-and-tiling">Room Proportion and Tiling</a><ul>
<li class="toctree-l7"><a class="reference internal" href="#room-depth">Room Depth</a></li>
<li class="toctree-l7"><a class="reference internal" href="#interior-cubemap-tiling">Interior Cubemap Tiling</a></li>
<li class="toctree-l7"><a class="reference internal" href="#room-size">Room Size</a></li>
<li class="toctree-l7"><a class="reference internal" href="#spacing-between-windows">Spacing Between Windows</a></li>
<li class="toctree-l7"><a class="reference internal" href="#color-of-spaces-between-windows">Color of Spaces Between Windows</a></li>
</ul>
</li>
<li class="toctree-l6"><a class="reference internal" href="#window-illumination-parameters">Window Illumination Parameters</a></li>
<li class="toctree-l6"><a class="reference internal" href="#glass-distortion-parameters">Glass Distortion Parameters</a><ul>
<li class="toctree-l7"><a class="reference internal" href="#glass-distortion">Glass Distortion</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#distortion-tiling">Distortion Tiling</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#non-standard-solutions">Non-Standard Solutions</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#simulating-large-spaces">Simulating Large Spaces</a></li>
<li class="toctree-l5"><a class="reference internal" href="#random-rotation-in-individual-windows">Random Rotation in Individual Windows</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#window-as-separate-geometry-within-a-dag">Window as Separate Geometry within a .dag</a></li>
<li class="toctree-l6"><a class="reference internal" href="#window-as-a-separate-dag-placed-by-a-composite">Window as a Separate .dag, Placed by a Composite</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="rendinst_layered.html"><code class="docutils literal notranslate"><span class="pre">rendinst_layered</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="rendinst_layered_lightmap.html"><code class="docutils literal notranslate"><span class="pre">rendinst_layered_lightmap</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="rendinst_parallax_ice.html"><code class="docutils literal notranslate"><span class="pre">rendinst_parallax_ice</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="rendinst_perlin_layered.html"><code class="docutils literal notranslate"><span class="pre">rendinst_perlin_layered</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="rendinst_simple_emissive.html"><code class="docutils literal notranslate"><span class="pre">rendinst_simple_emissive</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="simple_aces_detailed.html"><code class="docutils literal notranslate"><span class="pre">simple_aces_detailed</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="rendinst_layered_family.html">Shader Family: <code class="docutils literal notranslate"><span class="pre">rendinst_layered</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="land_mesh_combined_decal_family.html">Shader Family: <code class="docutils literal notranslate"><span class="pre">land_mesh_combined_decal</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="dng-shaders/index.html">daNetGame-based Shaders</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../dagor-tools/index.html">Dagor Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../projects/index.html">Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials and Manuals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api-references/index.html">API References and Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Dagor Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Assets and Assets Management</a></li>
          <li class="breadcrumb-item"><a href="index.html">Shaders</a></li>
      <li class="breadcrumb-item active"><code class="docutils literal notranslate"><span class="pre">rendinst_interior_mapping</span></code></li>
  
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/assets/shaders/rendinst_interior_mapping.md.txt" rel="nofollow"> View page source</a>
      </li>
  <li class="wy-breadcrumbs-aside.github-icon">
    <a href="https://github.com/GaijinEntertainment/DagorEngine" target="_blank" rel="noopener">
      <img src="../../_static/_images/github-mark.png"
           alt="GitHub"
           style="height: 1.5em; vertical-align: text-bottom; " />
    </a>
  </li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="rendinst-interior-mapping">
<h1><code class="docutils literal notranslate"><span class="pre">rendinst_interior_mapping</span></code><a class="headerlink" href="#rendinst-interior-mapping" title="Link to this heading"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">rendinst_interior_mapping</span></code> shader was developed to simulate interiors for
large windows (and a significant number of windows) by projecting an interior
cubemap onto a plane or box. This shader creates the illusion of an interior
“behind the glass” using a drawn cubemap. Reflections on the glass are simulated
either from a custom-made cubemap or from an environment cubemap that is
generated each time the map is loaded.</p>
</section>
<section id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Link to this heading"></a></h2>
<p>Common parameters:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;fadeout=50,</span> <span class="pre">100,</span> <span class="pre">100,</span> <span class="pre">200&quot;</span></code> – Cubemap fade settings. The first two
parameters control the interior fade, while the last two control the exterior
fade.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;fade_color=0.188,</span> <span class="pre">0.224,</span> <span class="pre">0.259,</span> <span class="pre">0&quot;</span></code> – Glass color during cubemap
fading, specified in RGB format using decimal values.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;room_depth=1&quot;</span></code> – Sets the depth of the far wall, allowing it to be
pushed back to create the illusion of a larger space.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;tile=1,</span> <span class="pre">1,</span> <span class="pre">1,</span> <span class="pre">0&quot;</span></code> – Controls the tiling of the interior cubemap.
This parameter can be used to create multiple rooms on a single plane.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;room_size=2,</span> <span class="pre">1,</span> <span class="pre">0,</span> <span class="pre">0&quot;</span></code> – Defines the proportions of the window (and
the room behind it, as the room is usually “matched” to the window’s width and
height).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;tile_space=1,1,0,0&quot;</span></code> – Creates spaces between the windows. The
first two components control the tiling, while the last two control the
offset.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;tile_space_color=0.58,0.216,0.62,0,1&quot;</span></code> – Defines the color of the
spaces between the windows (first three components) and the strength of
reflections in these spaces (fourth component).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;room_selfillum=0.4&quot;</span></code> – Controls the self-illumination of the
interior.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;illum_random=3&quot;</span></code> – Adjusts the randomness of the interior’s
illumination.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;illum_only_at_night=1&quot;</span></code> – Enables illumination only at night.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;convexity_slope=-0.07,0.07,2,2&quot;</span></code> – The first two components control
the concavity/convexity of the glass, while the last two components adjust the
glass’s rotation on the horizontal and vertical axes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;contortion_tiling=1,1,1,1&quot;</span></code> – Tiling for refractions. The first two
components control the tiling width/height, the third controls the width of
the leftmost tile, and the fourth controls the height of the bottom tiles.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;smoothness_metalness_reflection=0.5,</span> <span class="pre">0.5,</span> <span class="pre">1.5,</span> <span class="pre">0&quot;</span></code> – Specifies
values for smoothness, metalness, and reflection.</p></li>
</ul>
<p><em>daNetGame</em>-based-specific parameters:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;shadow_caster=0&quot;</span></code> – Disables shadow casting by the glass using this
shader. By default, it is set to <code class="docutils literal notranslate"><span class="pre">1</span></code> (casting shadows enabled).</p></li>
</ul>
</section>
<section id="asset-requirements">
<h2>Asset Requirements<a class="headerlink" href="#asset-requirements" title="Link to this heading"></a></h2>
<p>Let’s consider the standard requirements that allow the use of all procedural
parameters of the shader. Non-standard features will be discussed separately at
the end of the article.</p>
<ol class="arabic">
<li><p>The mapping coordinates should match the asset’s coordinates, meaning that
its top-bottom-left-right should correspond to the top-bottom-left-right on
the mapping.</p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_01.jpg"><img alt="../../_images/rendinst_interior_mapping_01.jpg" class="bg-primary align-center" src="../../_images/rendinst_interior_mapping_01.jpg" style="width: 75%;" />
</a>
<br>
</li>
<li><p>The mapping, regardless of the window’s proportions, must be a full square in
the “texture” unwrap.</p></li>
<li><p>Cubemaps should be created in the following format:</p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_02.jpg"><img alt="../../_images/rendinst_interior_mapping_02.jpg" class="bg-primary align-left" src="../../_images/rendinst_interior_mapping_02.jpg" style="width: 7%;" />
</a>
</li>
</ol>
<ul class="simple">
<li><p>1 – Left</p></li>
<li><p>2 – Right</p></li>
<li><p>3 – Top (rotated 180 degrees)</p></li>
<li><p>4 – Bottom (rotated 180 degrees)</p></li>
<li><p>5 – Front-facing side. For the interior cubemap, this side should simply be
black.</p></li>
<li><p>6 – Far wall.</p></li>
</ul>
   <br clear="left">
<ol class="arabic simple" start="4">
<li><p>Cubemaps should be saved in <code class="docutils literal notranslate"><span class="pre">.tif</span></code> format.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In <em>daNetGame</em>-based projects, cubemaps can be created using the console command
<code class="docutils literal notranslate"><span class="pre">screencap.take_screenshot_360</span></code>.</p>
<p>The result will be saved as six images in the <code class="docutils literal notranslate"><span class="pre">&lt;project_name&gt;/game/Screenshots</span></code>
directory, which can then be assembled according to the template from point 3.</p>
</div>
</section>
<section id="shader-setup">
<h2>Shader Setup<a class="headerlink" href="#shader-setup" title="Link to this heading"></a></h2>
<section id="textures">
<h3>Textures<a class="headerlink" href="#textures" title="Link to this heading"></a></h3>
<p>The shader uses one or two textures.</p>
<ol class="arabic simple">
<li><p>The first slot is for the interior cubemap (mandatory texture). Simulates the
interior behind the glass.</p></li>
<li><p>The third slot is for the exterior cubemap (optional texture). Simulates the
external environment and is best used on lower floors. On higher floors, this
may not work as well because objects in the cubemap can appear
disproportionately large. For higher floors, it is recommended not to specify
this texture, in which case the environment cubemap will be used instead.</p></li>
</ol>
</section>
<section id="id1">
<h3>Parameters<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<section id="cubemap-fading">
<h4>Cubemap Fading<a class="headerlink" href="#cubemap-fading" title="Link to this heading"></a></h4>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;fadeout=50,</span> <span class="pre">100,</span> <span class="pre">100,</span> <span class="pre">200&quot;</span></code> – Controls cubemap fading. The first
two parameters affect the interior, and the last two affect the exterior. For
each cubemap, the first parameter specifies the distance at which fading
begins, and the second specifies the distance at which fading is complete.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;fade_color=0.188,</span> <span class="pre">0.224,</span> <span class="pre">0.259,</span> <span class="pre">0&quot;</span></code> – Sets the glass color during
cubemap fading. The color is specified in the RGB format using decimal
values. For example, an RGB color of <code class="docutils literal notranslate"><span class="pre">48,</span> <span class="pre">57,</span> <span class="pre">66</span></code> would be divided by 255 to
yield <code class="docutils literal notranslate"><span class="pre">0.188,</span> <span class="pre">0.224,</span> <span class="pre">0.259</span></code>. The fourth parameter is unused.</p></li>
</ol>
</section>
<section id="smoothness-metalness-and-reflection">
<h4>Smoothness, Metalness, and Reflection<a class="headerlink" href="#smoothness-metalness-and-reflection" title="Link to this heading"></a></h4>
<p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;smoothness_metalness_reflection=0.5,</span> <span class="pre">0.5,</span> <span class="pre">1.5,</span> <span class="pre">0&quot;</span></code> – This parameter
directly sets smoothness, metalness, and reflection values.</p>
</section>
<section id="room-proportion-and-tiling">
<h4>Room Proportion and Tiling<a class="headerlink" href="#room-proportion-and-tiling" title="Link to this heading"></a></h4>
<section id="room-depth">
<h5>Room Depth<a class="headerlink" href="#room-depth" title="Link to this heading"></a></h5>
<p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;room_depth=1&quot;</span></code> – Sets the depth of the far wall, allowing it to be
moved back to create the illusion of a larger space or brought closer to
simulate curtains behind the glass.</p>
</section>
<section id="interior-cubemap-tiling">
<h5>Interior Cubemap Tiling<a class="headerlink" href="#interior-cubemap-tiling" title="Link to this heading"></a></h5>
<p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;tile=1,</span> <span class="pre">1,</span> <span class="pre">1,</span> <span class="pre">0&quot;</span></code> – Controls the tiling of the interior cubemap,
allowing multiple rooms to be created on a single plane using this parameter:</p>
<ul class="simple">
<li><p>The first two components set the horizontal and vertical tiling, respectively.</p></li>
<li><p>The third component randomizes the cubemap rotation (<code class="docutils literal notranslate"><span class="pre">0</span></code>/<code class="docutils literal notranslate"><span class="pre">1</span></code> values).</p></li>
</ul>
<p><strong>How does it work?</strong></p>
<ol class="arabic">
<li><p>Map the surface (even if it’s a rectangle) into a square texture (1 tile per
UV) to achieve, for example, the following:</p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_03.jpg"><img alt="../../_images/rendinst_interior_mapping_03.jpg" class="bg-primary align-center" src="../../_images/rendinst_interior_mapping_03.jpg" style="width: 75%;" />
</a>
<br>
</li>
<li><p>Set the horizontal tiling value to <code class="docutils literal notranslate"><span class="pre">3</span></code> to create three rooms:</p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_04.jpg"><img alt="../../_images/rendinst_interior_mapping_04.jpg" class="bg-primary align-center" src="../../_images/rendinst_interior_mapping_04.jpg" style="width: 75%;" />
</a>
<br>
</li>
<li><p>Set the third component to <code class="docutils literal notranslate"><span class="pre">1</span></code> to achieve random cubemap rotation per room:</p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_05.jpg"><img alt="../../_images/rendinst_interior_mapping_05.jpg" class="bg-primary align-center" src="../../_images/rendinst_interior_mapping_05.jpg" style="width: 75%;" />
</a>
<br>
</li>
</ol>
</section>
<section id="room-size">
<h5>Room Size<a class="headerlink" href="#room-size" title="Link to this heading"></a></h5>
<p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;room_size=2,</span> <span class="pre">1,</span> <span class="pre">0,</span> <span class="pre">0&quot;</span></code> – Sets the proportions of the window (and thus
the room behind it, as the room usually matches the window’s width and height).
The first two components control width and height, respectively. These values
can be in any arbitrary units since they represent proportions, but it’s simpler
to use unit values.</p>
<p>Let’s examine how it works using the example above:</p>
<ol class="arabic">
<li><p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;room_size=1,</span> <span class="pre">1,</span> <span class="pre">0,</span> <span class="pre">0&quot;</span></code> – For testing, the window’s width and
height are set to be equal. This results in rooms curving towards the center:</p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_06.jpg"><img alt="../../_images/rendinst_interior_mapping_06.jpg" class="bg-primary align-center" src="../../_images/rendinst_interior_mapping_06.jpg" style="width: 75%;" />
</a>
<br>
</li>
<li><p>The model’s width is twice its height, so set the corresponding value to
<code class="docutils literal notranslate"><span class="pre">script:t=&quot;room_size=2,</span> <span class="pre">1,</span> <span class="pre">0,</span> <span class="pre">0&quot;</span></code>:</p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_07.jpg"><img alt="../../_images/rendinst_interior_mapping_07.jpg" class="bg-primary align-center" src="../../_images/rendinst_interior_mapping_07.jpg" style="width: 75%;" />
</a>
<br>
</li>
</ol>
<p>Everything is now proportionally correct.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This also presents a challenge – you cannot apply the same material to windows
with different proportions. The example uses a parallelepiped, and the side part
with the current material looks incorrect:</p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_08.jpg"><img alt="../../_images/rendinst_interior_mapping_08.jpg" class="bg-primary align-center" src="../../_images/rendinst_interior_mapping_08.jpg" style="width: 75%;" />
</a>
<br>
</div>
</section>
<section id="spacing-between-windows">
<h5>Spacing Between Windows<a class="headerlink" href="#spacing-between-windows" title="Link to this heading"></a></h5>
<p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;tile_space=1,1,0,0&quot;</span></code> – This parameter allows for varying the spacing
between windows, which is useful for buildings with asymmetrical window spacing.
The first two components control X and Y spacing, respectively (though all
components must be specified).</p>
<ol class="arabic">
<li><p>By default, the values are set to <code class="docutils literal notranslate"><span class="pre">script:t=&quot;tile_space=1,1,0,0&quot;</span></code>:</p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_09.jpg"><img alt="../../_images/rendinst_interior_mapping_09.jpg" class="bg-primary align-center" src="../../_images/rendinst_interior_mapping_09.jpg" style="width: 75%;" />
</a>
<br>
</li>
<li><p>Increasing these parameters will decrease the size of the windows within the
same area (the windows shrink relative to their centers):</p>
<p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;tile_space=2,2,0,0&quot;</span></code></p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_10.jpg"><img alt="../../_images/rendinst_interior_mapping_10.jpg" class="bg-primary align-center" src="../../_images/rendinst_interior_mapping_10.jpg" style="width: 75%;" />
</a>
<br>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;tile_space=5,2,0,0&quot;</span></code></p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_11.jpg"><img alt="../../_images/rendinst_interior_mapping_11.jpg" class="bg-primary align-center" src="../../_images/rendinst_interior_mapping_11.jpg" style="width: 75%;" />
</a>
<br>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;tile_space=5,2,0.5,0&quot;</span></code></p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_12.jpg"><img alt="../../_images/rendinst_interior_mapping_12.jpg" class="bg-primary align-center" src="../../_images/rendinst_interior_mapping_12.jpg" style="width: 75%;" />
</a>
<br>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;tile_space=5,2,0.5,0.5&quot;</span></code></p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_13.jpg"><img alt="../../_images/rendinst_interior_mapping_13.jpg" class="bg-primary align-center" src="../../_images/rendinst_interior_mapping_13.jpg" style="width: 75%;" />
</a>
<br>
</li>
</ol>
<p>Working with this parameter involves:</p>
<ol class="arabic simple">
<li><p>Counting the number of window openings.</p></li>
<li><p>Setting the appropriate window tiling using <code class="docutils literal notranslate"><span class="pre">script:t=&quot;tile=1,</span> <span class="pre">1,</span> <span class="pre">1,</span> <span class="pre">0&quot;</span></code>.</p></li>
<li><p>Adjusting the spacing between windows with this parameter.</p></li>
</ol>
</section>
<section id="color-of-spaces-between-windows">
<h5>Color of Spaces Between Windows<a class="headerlink" href="#color-of-spaces-between-windows" title="Link to this heading"></a></h5>
<p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;tile_space_color=0.58,0.216,0.62,0.1&quot;</span></code> – Sets the color of the spaces
between windows using the first three components. The fourth component controls
the reflection strength for these spaces.</p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_14.jpg"><img alt="../../_images/rendinst_interior_mapping_14.jpg" class="bg-primary align-center" src="../../_images/rendinst_interior_mapping_14.jpg" style="width: 75%;" />
</a>
<br>
</section>
</section>
<section id="window-illumination-parameters">
<h4>Window Illumination Parameters<a class="headerlink" href="#window-illumination-parameters" title="Link to this heading"></a></h4>
<p>Parameters for controlling the illumination of the interior cubemap. The ability
to make windows glow is implemented with two parameters:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;room_selfillum=0.4&quot;</span></code> – Controls self-illumination. The value can
range from 0 to any desired amount.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;illum_random=3&quot;</span></code> – Controls the randomness of illumination. The
value represents the number of illumination states – the higher the number,
the greater the variety.</p></li>
</ul>
<p>Illumination fades more slowly than the interior cubemap itself. This occurs
according to the function <code class="docutils literal notranslate"><span class="pre">(1</span> <span class="pre">-</span> <span class="pre">0.8*distFade)</span></code>, where <code class="docutils literal notranslate"><span class="pre">distFade</span></code> is calculated
as <code class="docutils literal notranslate"><span class="pre">(distance</span> <span class="pre">to</span> <span class="pre">glass)/(interior</span> <span class="pre">cubemap</span> <span class="pre">fade</span> <span class="pre">distance)</span></code>, but never exceeds
<code class="docutils literal notranslate"><span class="pre">1</span></code>. Therefore, the minimum illumination is <code class="docutils literal notranslate"><span class="pre">1-0.8=0.2</span></code>, not <code class="docutils literal notranslate"><span class="pre">0</span></code>, because it’s
technically impossible to smoothly fade illumination to <code class="docutils literal notranslate"><span class="pre">0</span></code> – it always cuts
off. As a result, a minimal level of light remains.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;illum_only_at_night=1&quot;</span></code> – Enables illumination only at night.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This parameter should be specified for everything that should light up, except
for rare cases when light is needed during the day.</p>
</div>
</li>
</ul>
</section>
<section id="glass-distortion-parameters">
<h4>Glass Distortion Parameters<a class="headerlink" href="#glass-distortion-parameters" title="Link to this heading"></a></h4>
<section id="glass-distortion">
<h5>Glass Distortion<a class="headerlink" href="#glass-distortion" title="Link to this heading"></a></h5>
<p>You can set the glass distortion (convexity/concavity) and rotation (on
horizontal and vertical planes) to create varied reflections and sun glints on
the glass.</p>
<p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;convexity_slope=-0.07,0.07,2,2&quot;</span></code> where:</p>
<ul class="simple">
<li><p>The first two components define the maximum concavity (away from the viewer)
and convexity (toward the viewer) of the glass. A random value within the
specified range is added to the glass normal. Usually, these values are less
than <code class="docutils literal notranslate"><span class="pre">1</span></code> (ranging from hundredths to tenths) and should be tested on specific
windows. Larger panoramic windows require smaller values, while smaller, less
common windows can handle larger values. Essentially, this sets the
“sharpness” of the distortion – the larger the values, the more pronounced the
center of the distortion. The position of the distortion center is randomized
across the glass surface.</p></li>
<li><p>The third and fourth components control the glass rotation on the horizontal
and vertical planes, respectively. This rotation is also added to the glass
normal and is specified in degrees. These values represent the absolute
maximum/minimum (e.g., with a value of 2, the range is <code class="docutils literal notranslate"><span class="pre">|2|</span></code>, meaning between
-2 and +2). As with distortion, a random value is chosen within this range.
For instance, setting a 10-degree rotation will randomize between -10 and +10.</p></li>
</ul>
<p>Let’s look at some examples. In the images below: left – the normal map, right –
the result.</p>
<ol class="arabic">
<li><p>All distortion parameters set to zero:</p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_15.jpg"><img alt="../../_images/rendinst_interior_mapping_15.jpg" class="bg-primary align-center" src="../../_images/rendinst_interior_mapping_15.jpg" style="width: 75%;" />
</a>
<br>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;convexity_slope=-0.03,-0.03,0,0&quot;</span></code></p>
<p>The normal map shows little change due to the small values, but the
reflection demonstrates significant distortion.</p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_16.jpg"><img alt="../../_images/rendinst_interior_mapping_16.jpg" class="bg-primary align-center" src="../../_images/rendinst_interior_mapping_16.jpg" style="width: 75%;" />
</a>
<br>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;convexity_slope=0,0,10,0&quot;</span></code></p>
<p>Horizontal rotation is slightly noticeable on the normal map.</p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_17.jpg"><img alt="../../_images/rendinst_interior_mapping_17.jpg" class="bg-primary align-center" src="../../_images/rendinst_interior_mapping_17.jpg" style="width: 75%;" />
</a>
<br>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;convexity_slope=0,0,0,10&quot;</span></code></p>
<p>Vertical rotation is also noticeable on the normal map.</p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_18.jpg"><img alt="../../_images/rendinst_interior_mapping_18.jpg" class="bg-primary align-center" src="../../_images/rendinst_interior_mapping_18.jpg" style="width: 75%;" />
</a>
<br>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;convexity_slope=-100,100,0,0&quot;</span></code></p>
<p>Extremely exaggerated values are used to illustrate the nature of distortion.
(Also note that the distortion center is not centered on the window – there’s
a procedural shift on each window tile.)</p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_19.jpg"><img alt="../../_images/rendinst_interior_mapping_19.jpg" class="bg-primary align-center" src="../../_images/rendinst_interior_mapping_19.jpg" style="width: 75%;" />
</a>
<br>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;convexity_slope=-0.03,0.3,10,10&quot;</span></code></p>
<p>Example on “distributed” windows with distortion:</p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_20.jpg"><img alt="../../_images/rendinst_interior_mapping_20.jpg" class="bg-primary align-center" src="../../_images/rendinst_interior_mapping_20.jpg" style="width: 75%;" />
</a>
<br>
<p>Example on “distributed” windows without distortion:</p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_21.jpg"><img alt="../../_images/rendinst_interior_mapping_21.jpg" class="bg-primary align-center" src="../../_images/rendinst_interior_mapping_21.jpg" style="width: 75%;" />
</a>
<br>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">script:t=&quot;convexity_slope=-100.03,100.3,100,100&quot;</span></code></p>
<p>Example on “distributed” windows with exaggerated values – demonstrating the
randomness of shifts and selection of values.</p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_22.jpg"><img alt="../../_images/rendinst_interior_mapping_22.jpg" class="bg-primary align-center" src="../../_images/rendinst_interior_mapping_22.jpg" style="width: 75%;" />
</a>
<br>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_23.jpg"><img alt="../../_images/rendinst_interior_mapping_23.jpg" class="bg-primary align-center" src="../../_images/rendinst_interior_mapping_23.jpg" style="width: 75%;" />
</a>
<br>
</li>
</ol>
<p>Different reflections on the windows of a building thanks to this technique.
Visible tiling seams on the cubemap – normal map seams visible across windows.</p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_24.jpg"><img alt="../../_images/rendinst_interior_mapping_24.jpg" class="bg-primary align-center" src="../../_images/rendinst_interior_mapping_24.jpg" style="width: 75%;" />
</a>
<br>
</section>
</section>
</section>
<section id="distortion-tiling">
<h3>Distortion Tiling<a class="headerlink" href="#distortion-tiling" title="Link to this heading"></a></h3>
<p>In practice, basic window tiling is often insufficient. The interior may consist
of a single “room”, but the window frame might have multiple panes of glass,
each needing to reflect light differently.</p>
<table style="text-align:center; width:98%"><thead><tr>
  <th style="text-align:center; width:49%"><p>The current area of a single reflection</p></th>
  <th style="text-align:center; width:49%"><p>The desired area of a single reflection</p></th></tr></thead>
</table>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_25.jpg"><img alt="../../_images/rendinst_interior_mapping_25.jpg" class="bg-primary" src="../../_images/rendinst_interior_mapping_25.jpg" style="width: 49%;" />
</a>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_26.jpg"><img alt="../../_images/rendinst_interior_mapping_26.jpg" class="bg-primary" src="../../_images/rendinst_interior_mapping_26.jpg" style="width: 49%;" />
</a>
<p>To achieve this, use the parameter <code class="docutils literal notranslate"><span class="pre">script:t=&quot;contortion_tiling=1,2,1,1&quot;</span></code>,
where:</p>
<ul>
<li><p>The first component controls horizontal tiling of distortions.</p></li>
<li><p>The second component controls vertical tiling of distortions.</p></li>
<li><p>The third component sets the width (as a fraction of the window) of the
leftmost distortion tile.</p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_27.jpg"><img alt="../../_images/rendinst_interior_mapping_27.jpg" class="bg-primary align-center" src="../../_images/rendinst_interior_mapping_27.jpg" style="width: 50%;" />
</a>
<br>
</li>
<li><p>The fourth component sets the height (as a fraction of the window) of the
leftmost lower distortion tile.</p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_28.jpg"><img alt="../../_images/rendinst_interior_mapping_28.jpg" class="bg-primary align-center" src="../../_images/rendinst_interior_mapping_28.jpg" style="width: 50%;" />
</a>
<br>
</li>
</ul>
<p>For the given window example:</p>
<ul class="simple">
<li><p>Horizontal tiling is set to <code class="docutils literal notranslate"><span class="pre">2</span></code> (indicating 2 panes of glass).</p></li>
<li><p>Vertical tiling is also set to <code class="docutils literal notranslate"><span class="pre">2</span></code> (indicating 2 panes of glass).</p></li>
<li><p>The width of the leftmost tile is set to <code class="docutils literal notranslate"><span class="pre">0.5</span></code> (half the window width).</p></li>
<li><p>The height of the bottom tile is set to <code class="docutils literal notranslate"><span class="pre">0.65</span></code> (approximately two-thirds of
the window’s total height).</p></li>
</ul>
<p>Thus, <code class="docutils literal notranslate"><span class="pre">script:t=&quot;contortion_tiling=2,2,0.5,0.65&quot;</span></code>. This configuration ensures
that each pane of glass has its unique distortion (in <em>Asset Viewer</em> it’s not so
apparent, but in the game the difference is huge due to the reflections on the
windows).</p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_29.jpg"><img alt="../../_images/rendinst_interior_mapping_29.jpg" class="bg-primary align-center" src="../../_images/rendinst_interior_mapping_29.jpg" style="width: 50%;" />
</a>
<br>
<div class="admonition important">
<p class="admonition-title">Important</p>
<ul>
<li><p>The third component specifies the width of <strong>only</strong> the leftmost tile. All
other tiles will maintain a uniform proportional width.</p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_30.jpg"><img alt="../../_images/rendinst_interior_mapping_30.jpg" class="bg-primary align-center" src="../../_images/rendinst_interior_mapping_30.jpg" style="width: 50%;" />
</a>
<br>
</li>
<li><p>The fourth component specifies the height for all bottom tiles, meaning it
affects the entire window.</p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_31.jpg"><img alt="../../_images/rendinst_interior_mapping_31.jpg" class="bg-primary align-center" src="../../_images/rendinst_interior_mapping_31.jpg" style="width: 25%;" />
</a>
<br>
</li>
<li><p>As a result, creating a window with a single vent procedurally isn’t
feasible – additional parameters would be required for every possible
configuration.</p></li>
</ul>
</div>
</section>
</section>
<section id="non-standard-solutions">
<h2>Non-Standard Solutions<a class="headerlink" href="#non-standard-solutions" title="Link to this heading"></a></h2>
<section id="simulating-large-spaces">
<h3>Simulating Large Spaces<a class="headerlink" href="#simulating-large-spaces" title="Link to this heading"></a></h3>
<p>According to asset requirements, the window should be mapped strictly within a
square texture. However, this mapping results in the room behind the glass being
perfectly aligned with the window’s edges. If we want to increase the space
behind the glass, we need to reduce the mapping.</p>
<p>By reducing the mapping, the space behind the glass appears larger. The ceiling,
walls, and floor are pushed farther back, giving the impression of a room much
larger than the window.</p>
<table style="text-align:center; width:98%"><tr>
  <th style="text-align:center; width:49%"><p>Standard mapping</p></th>
  <th style="text-align:center; width:49%"><p>Reduced mapping</p></th></tr>
</table>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_32.jpg"><img alt="../../_images/rendinst_interior_mapping_32.jpg" class="bg-primary" src="../../_images/rendinst_interior_mapping_32.jpg" style="width: 49%;" />
</a>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_33.jpg"><img alt="../../_images/rendinst_interior_mapping_33.jpg" class="bg-primary" src="../../_images/rendinst_interior_mapping_33.jpg" style="width: 49%;" />
</a>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_34.jpg"><img alt="../../_images/rendinst_interior_mapping_34.jpg" class="bg-primary" src="../../_images/rendinst_interior_mapping_34.jpg" style="width: 49%;" />
</a>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_35.jpg"><img alt="../../_images/rendinst_interior_mapping_35.jpg" class="bg-primary" src="../../_images/rendinst_interior_mapping_35.jpg" style="width: 49%;" />
</a>
<p>We need to show that a single room lies behind three separate windows. With
default mapping, you end up with three windows, each showing its own room. By
splitting the mapping, you achieve a single large room visible through all three
windows.</p>
<table style="text-align:center; width:98%"><tr>
  <th style="text-align:center; width:49%"><p>Standard mapping</p></th>
  <th style="text-align:center; width:49%"><p>Split mapping</p></th></tr>
</table>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_36.jpg"><img alt="../../_images/rendinst_interior_mapping_36.jpg" class="bg-primary" src="../../_images/rendinst_interior_mapping_36.jpg" style="width: 49%;" />
</a>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_37.jpg"><img alt="../../_images/rendinst_interior_mapping_37.jpg" class="bg-primary" src="../../_images/rendinst_interior_mapping_37.jpg" style="width: 49%;" />
</a>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_38.jpg"><img alt="../../_images/rendinst_interior_mapping_38.jpg" class="bg-primary" src="../../_images/rendinst_interior_mapping_38.jpg" style="width: 49%;" />
</a>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_39.jpg"><img alt="../../_images/rendinst_interior_mapping_39.jpg" class="bg-primary" src="../../_images/rendinst_interior_mapping_39.jpg" style="width: 49%;" />
</a>
<p>In the previous example, the room became an enormous hangar because we
proportionally reduced the window mapping.</p>
<p>To avoid this, do the following:</p>
<ol class="arabic simple">
<li><p>Scale the mapping non-proportionally.</p></li>
<li><p>Compensate for the non-proportional mapping with the <code class="docutils literal notranslate"><span class="pre">room_size=2,</span> <span class="pre">1,</span> <span class="pre">0,</span> <span class="pre">0</span></code>
parameter.</p></li>
</ol>
<table style="text-align:center; width:98%"><tr>
  <th style="text-align:center; width:49%"><p>Split mapping</p></th>
  <th style="text-align:center; width:49%"><p>Compensated mapping</p></th></tr>
</table>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_37.jpg"><img alt="../../_images/rendinst_interior_mapping_37.jpg" class="bg-primary" src="../../_images/rendinst_interior_mapping_37.jpg" style="width: 49%;" />
</a>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_40.jpg"><img alt="../../_images/rendinst_interior_mapping_40.jpg" class="bg-primary" src="../../_images/rendinst_interior_mapping_40.jpg" style="width: 49%;" />
</a>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_39.jpg"><img alt="../../_images/rendinst_interior_mapping_39.jpg" class="bg-primary" src="../../_images/rendinst_interior_mapping_39.jpg" style="width: 49%;" />
</a>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_41.jpg"><img alt="../../_images/rendinst_interior_mapping_41.jpg" class="bg-primary" src="../../_images/rendinst_interior_mapping_41.jpg" style="width: 49%;" />
</a>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default, we use this parameter to emphasize the geometry’s proportions – if
the width is twice the height, we set <code class="docutils literal notranslate"><span class="pre">room_size=2,</span> <span class="pre">1</span></code>. However, in our example,
the geometry is square, meaning the parameter should be <code class="docutils literal notranslate"><span class="pre">room_size=1,1</span></code>. But we
reduced the width of the mapping to roughly half the height, so we compensate by
setting the width to <code class="docutils literal notranslate"><span class="pre">2</span></code> and the height to <code class="docutils literal notranslate"><span class="pre">1</span></code>. In this case, the smaller
mapping side corresponds to the larger parameter value.</p>
</div>
</section>
<section id="random-rotation-in-individual-windows">
<h3>Random Rotation in Individual Windows<a class="headerlink" href="#random-rotation-in-individual-windows" title="Link to this heading"></a></h3>
<p>We have a parameter for adding randomness to tiled cubemaps: <code class="docutils literal notranslate"><span class="pre">script:t=&quot;tile=1,</span> <span class="pre">1,</span> <span class="pre">1,</span> <span class="pre">0&quot;</span></code>. This works when you have a large window area and procedurally tile
several rooms within it. However, there are often cases where each window is a
separate piece of geometry. Two primary scenarios arise:</p>
<ul class="simple">
<li><p>Each window is a separate piece of geometry within a single <code class="docutils literal notranslate"><span class="pre">.dag</span></code>.</p></li>
<li><p>Each window is a separate <code class="docutils literal notranslate"><span class="pre">.dag</span></code>, placed on a building by a composite.</p></li>
</ul>
<p>Let’s consider both cases.</p>
<section id="window-as-separate-geometry-within-a-dag">
<h4>Window as Separate Geometry within a .dag<a class="headerlink" href="#window-as-separate-geometry-within-a-dag" title="Link to this heading"></a></h4>
<p>By default, exporting a <code class="docutils literal notranslate"><span class="pre">.dag</span></code> with windows and randomness enabled will not show
any difference – all windows will be mapped identically. However, when the
object moves across the map, the mapping will shift, but uniformly.</p>
<table style="text-align:center; width:98%"><tr>
  <th style="text-align:center; width:29%"><p>One object</p></th>
  <th style="text-align:center; width:69%"><p>A composite of three objects</p></th></tr>
</table>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_42.jpg"><img alt="../../_images/rendinst_interior_mapping_42.jpg" class="bg-primary" src="../../_images/rendinst_interior_mapping_42.jpg" style="width: 29%;" />
</a>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_43.jpg"><img alt="../../_images/rendinst_interior_mapping_43.jpg" class="bg-primary" src="../../_images/rendinst_interior_mapping_43.jpg" style="width: 69%;" />
</a>
<p>The randomness works, but it’s flawed – everything remains too similar. To fix
this, you’ll need to manually adjust the mapping for each window. The fewer
identical mapping positions, the more randomness you’ll achieve.</p>
<p>Adjust the mapping both vertically and horizontally. This can be done
procedurally with plugins; the key is to keep the mapping within the bounds of
texture “cells”.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It’s better to shift neighboring windows vertically rather than horizontally.
This improves the randomness effect.</p>
</div>
<table style="text-align:center; width:98%"><tr>
  <th style="text-align:center; width:28%"><p>One object</p></th>
  <th style="text-align:center; width:70%"><p>A composite of three objects</p></th></tr>
</table>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_44.jpg"><img alt="../../_images/rendinst_interior_mapping_44.jpg" class="bg-primary" src="../../_images/rendinst_interior_mapping_44.jpg" style="width: 28%;" />
</a>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_45.jpg"><img alt="../../_images/rendinst_interior_mapping_45.jpg" class="bg-primary" src="../../_images/rendinst_interior_mapping_45.jpg" style="width: 70%;" />
</a>
<p>The difference might not be obvious here (the cubemap is too uniform), but
everything is randomly rotated on each section. Let’s replace the cubemap for
better visibility.</p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_46.jpg"><img alt="../../_images/rendinst_interior_mapping_46.jpg" class="bg-primary" src="../../_images/rendinst_interior_mapping_46.jpg" style="width: 28%;" />
</a>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_47.jpg"><img alt="../../_images/rendinst_interior_mapping_47.jpg" class="bg-primary" src="../../_images/rendinst_interior_mapping_47.jpg" style="width: 70%;" />
</a>
</section>
<section id="window-as-a-separate-dag-placed-by-a-composite">
<h4>Window as a Separate .dag, Placed by a Composite<a class="headerlink" href="#window-as-a-separate-dag-placed-by-a-composite" title="Link to this heading"></a></h4>
<p>Although a different scenario, the solution remains the same.</p>
<p>In the previous case, enabled randomness on standard mapping worked in a grouped
manner – all windows changed mapping simultaneously when the object moved (since
the windows were part of one large <code class="docutils literal notranslate"><span class="pre">.dag</span></code>). In this case, the same thing
happens, but with individual windows. The windows are more frequently placed and
mapped. (Let’s set a cubemap with curtains in advance to better see the
difference.)</p>
<table style="text-align:center; width:98%"><tr>
  <th style="text-align:center; width:36%"><p>One object</p></th>
  <th style="text-align:center; width:62%"><p>A composite of three objects</p></th></tr>
</table>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_48.jpg"><img alt="../../_images/rendinst_interior_mapping_48.jpg" class="bg-primary" src="../../_images/rendinst_interior_mapping_48.jpg" style="width: 36%;" />
</a>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_49.jpg"><img alt="../../_images/rendinst_interior_mapping_49.jpg" class="bg-primary" src="../../_images/rendinst_interior_mapping_49.jpg" style="width: 62%;" />
</a>
<p>Notice that the windows have identical randomness with identical shifts relative
to zero (center window at the bottom). (Exception: the middle left window –
because of some “magic”).</p>
<p>To avoid this situation, you can:</p>
<ul>
<li><p>Either set the randomness value to a different <strong>odd</strong> number (it doesn’t work
well with even numbers). For example, set it to <code class="docutils literal notranslate"><span class="pre">3</span></code> (<code class="docutils literal notranslate"><span class="pre">script:t=&quot;tile=1,</span> <span class="pre">1,</span> <span class="pre">3,</span> <span class="pre">0&quot;</span></code>):</p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_50.jpg"><img alt="../../_images/rendinst_interior_mapping_50.jpg" class="bg-primary align-center" src="../../_images/rendinst_interior_mapping_50.jpg" style="width: 75%;" />
</a>
<br>
</li>
<li><p>Or shift the window mapping (which I find works better).</p>
<a class="bg-primary reference internal image-reference" href="../../_images/rendinst_interior_mapping_51.jpg"><img alt="../../_images/rendinst_interior_mapping_51.jpg" class="bg-primary align-center" src="../../_images/rendinst_interior_mapping_51.jpg" style="width: 75%;" />
</a>
</li>
</ul>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Shaders" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="rendinst_layered.html" class="btn btn-neutral float-right" title="rendinst_layered" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Gaijin Entertainment 2025.
      <span class="lastupdated">Last updated on Oct 04, 2025.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>