# Dagor Damages Setup Tool

## Installation

[Install the script](installation.md) following the provided instructions.

```{admonition} 3ds Max Version Requirement
:class: warning

This script requires **3ds Max 2013 or later**.
```

## Accessing Damage Setup Tool

1. Navigate to **Gaijin Tools** {cnum}`1` **> Damage Objects Setup...**
   {cnum}`2`. This will open the main window of the Dagor Damages Setup
   {cnum}`3`.

2. To verify the version of the script, go to **Gaijin Tools** {cnum}`1` **>
   About**. The **About** window will display the current version. It's
   important to check this regularly to ensure your script is up to date.

   ```{eval-rst}
   .. image:: _images/damages_setup_01.png
      :alt: Damage Setup Tool
      :width: 45em
      :align: center
   ```

   ```{admonition} Plugin Version Requirement
   :class: warning

   Requires plugin version **1.4 or higher**.
   ```

## Configuring Damage Setup Tool

Download the following test scene:
{download}`dmg_example.max <_examples/dmg_example.zip>`
and open the downloaded project in 3ds Max.

```{admonition} 3ds Max Version Requirement
:class: warning

This scene requires **3ds Max 2018 or later**.
```

Open the utility window:

```{eval-rst}
.. image:: _images/damages_setup_02.png
   :alt: Damage Setup Tool
   :width: 30em
   :align: center
```

**Parameters:**

- **Visible Object Parameters** {cnum}`1`: defines parameters for object chunks
  that will be visually displayed in the game. Default settings are optimized
  for most cases but can be customized as needed.
- **Collision Object Parameters** {cnum}`2`: sets parameters for the collisions
  generated by the tool. These are pre-configured for common use cases, but you
  can modify them to fit specific requirements.
- **Random Collision Rotation** {cnum}`3`: adjusts the rotation limits for
  generated collisions to create more natural-looking destruction effects.
- **Convex Maximum Verts** {cnum}`4`: specifies the maximum number of points in
   a generated collision. This option is only active if a convex hull is
   selected as the collision type.
- **Convex Surface Offset** {cnum}`5`: defines the displacement of the collision
  surface relative to the object surface. This setting is also only active when
  using a convex hull collision type.
- **Collision Name Postfix**{cnum}`6`: adds a postfix to the names of generated
  collisions to easily distinguish them from other objects.
- **Collision Type** {cnum}`7`: selects the type of collision to generate. The
  default is a box, but other options include sphere, capsule, and convex hull.
- **Preserve Old User Parameters** {cnum}`8`: determines whether the existing
  parameters in **Visible Object Parameters** {cnum}`1` and **Collision Object
  Parameters** {cnum}`2` will be overwritten. If unchecked, all existing
  parameters will be removed and replaced with the new ones.
- **CREATE FROM SELECTION!** {cnum}`9`: after selecting the objects for which
  you want to generate collisions, click this button to start the process.
- **Open Local Documentation** {cnum}`10`: links to this documentation.
- **Get in Touch with the Author** {cnum}`11`: provides contact information for
  the developer if assistance is needed.
- **Progress** {cnum}`12`: bar displays the progress of the scene processing.
  For scenes with many objects (from 50 to 100), this may take several minutes.

## Generating Collisions

1. Select the objects you want to generate collisions for {cnum}`A`.

2. Prepare them for export to the engine.

3. Click the **CREATE FROM SELECTION!** button {cnum}`B`.

   ```{eval-rst}
   .. image:: _images/damages_setup_03.png
      :alt: Damage Setup Tool
      :width: 60em
      :align: center
   ```

## Reviewing Generated Collisions

After processing, a list of new objects {cnum}`C` and generated collisions
{cnum}`D` will appear.

```{eval-rst}
.. image:: _images/damages_setup_04.png
   :alt: Damage Setup Tool
   :width: 60em
   :align: center
```

