<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.7" xml:lang="en-US">
  <compounddef id="dag__picMgr_8h" kind="file" language="C++">
    <compoundname>dag_picMgr.h</compoundname>
    <includes local="no">drv/3d/dag_resId.h</includes>
    <includes local="no">drv/3d/dag_samplerHandle.h</includes>
    <includes local="no">math/dag_Point2.h</includes>
    <incdepgraph>
      <node id="1">
        <label>dag_picMgr.h</label>
        <link refid="dag__picMgr_8h"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
      </node>
      <node id="2">
        <label>drv/3d/dag_resId.h</label>
      </node>
      <node id="3">
        <label>drv/3d/dag_samplerHandle.h</label>
      </node>
      <node id="4">
        <label>math/dag_Point2.h</label>
      </node>
    </incdepgraph>
    <innerclass refid="structPictureManager_1_1PictureRenderFactory" prot="public">PictureManager::PictureRenderFactory</innerclass>
    <innerclass refid="structPictureManager_1_1PicDesc" prot="public">PictureManager::PicDesc</innerclass>
    <innernamespace refid="namespacePictureManager">PictureManager</innernamespace>
      <sectiondef kind="define">
      <memberdef kind="define" id="dag__picMgr_8h_1a32ad040883ac82a48acf1b5aaebcc666" prot="public" static="no">
        <name>BAD_PICTUREID</name>
        <initializer>-1</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="dag_picMgr.h" line="18" column="9" bodyfile="dag_picMgr.h" bodystart="18" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="typedef">
      <memberdef kind="typedef" id="dag__picMgr_8h_1a1b029c2caf92d6a1931655479bcf05b5" prot="public" static="no">
        <type>int</type>
        <definition>typedef int PICTUREID</definition>
        <argsstring></argsstring>
        <name>PICTUREID</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="dag_picMgr.h" line="15" column="13" bodyfile="dag_picMgr.h" bodystart="15" bodyend="-1"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Dagor<sp/>Engine<sp/>6.5</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Copyright<sp/>(C)<sp/>Gaijin<sp/>Games<sp/>KFT.<sp/><sp/>All<sp/>rights<sp/>reserved.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="preprocessor">#pragma<sp/>once</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;drv/3d/dag_resId.h&gt;</highlight><highlight class="normal"><sp/></highlight><highlight class="comment">//<sp/>TEXTUREID</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;drv/3d/dag_samplerHandle.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;math/dag_Point2.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal">DataBlock;</highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal">String;</highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Picture<sp/>id<sp/>type</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="15" refid="dag__picMgr_8h_1a1b029c2caf92d6a1931655479bcf05b5" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="dag__picMgr_8h_1a1b029c2caf92d6a1931655479bcf05b5" kindref="member">PICTUREID</ref>;</highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight></codeline>
<codeline lineno="17"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Invalid<sp/>picture<sp/>id</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="18" refid="dag__picMgr_8h_1a32ad040883ac82a48acf1b5aaebcc666" refkind="member"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>BAD_PICTUREID<sp/>-1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight></codeline>
<codeline lineno="21" refid="namespacePictureManager" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">namespace<sp/></highlight><highlight class="normal"><ref refid="namespacePictureManager" kindref="compound">PictureManager</ref></highlight></codeline>
<codeline lineno="22"><highlight class="normal">{</highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structPictureManager_1_1PicDesc" kindref="compound">PicDesc</ref>;</highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight></codeline>
<codeline lineno="25" refid="namespacePictureManager_1aa8a639518169f2263ce46d858861b0b5" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/>void<sp/>(*<ref refid="namespacePictureManager_1aa8a639518169f2263ce46d858861b0b5" kindref="member">async_load_done_cb_t</ref>)(<ref refid="dag__picMgr_8h_1a1b029c2caf92d6a1931655479bcf05b5" kindref="member">PICTUREID</ref><sp/>pid,<sp/>TEXTUREID<sp/>tid,<sp/>d3d::SamplerHandle<sp/>smp,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>Point2<sp/>*tcLt,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>Point2<sp/>*tcRb,</highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>Point2<sp/>*picture_sz,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*arg);</highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Picture<sp/>can<sp/>be<sp/>obtained<sp/>by<sp/>real<sp/>texture<sp/>name<sp/>or<sp/>by<sp/>picture<sp/>name<sp/>in<sp/>BLK<sp/>file:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/>&quot;tex/mytex.tga&quot;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-<sp/>real<sp/>texture<sp/>name</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/><sp/>&quot;tex/mytextures#mytex&quot;<sp/>-<sp/>picture<sp/>&quot;mytex&quot;<sp/>in<sp/>tex/mytextures.blk</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight><highlight class="comment">//<sp/>startup/release<sp/>manager</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="33" refid="namespacePictureManager_1afffcf58982a1b31e3ed39fba61673f4b" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="namespacePictureManager_1afffcf58982a1b31e3ed39fba61673f4b" kindref="member">init</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>DataBlock<sp/>*params<sp/>=<sp/>NULL);</highlight></codeline>
<codeline lineno="34" refid="namespacePictureManager_1a11a56d8d2369464e534054282267a3ca" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="namespacePictureManager_1a11a56d8d2369464e534054282267a3ca" kindref="member">prepare_to_release</ref>(</highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>final_term<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="35" refid="namespacePictureManager_1aba739212ccdc3bea434c7c2fb14d0779" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="namespacePictureManager_1aba739212ccdc3bea434c7c2fb14d0779" kindref="member">release</ref>();</highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight><highlight class="comment">//<sp/>perform<sp/>actions<sp/>per-frame<sp/>(to<sp/>be<sp/>called<sp/>at<sp/>the<sp/>beginning<sp/>of<sp/>each<sp/>frame<sp/>render<sp/>to<sp/>perform<sp/>some<sp/>pending<sp/>actions)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="38" refid="namespacePictureManager_1abb138203f8dc811d7ac5c390741a08d6" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="namespacePictureManager_1abb138203f8dc811d7ac5c390741a08d6" kindref="member">per_frame_update</ref>();</highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight><highlight class="comment">//<sp/>perform<sp/>actions<sp/>before/after<sp/>d3d<sp/>reset<sp/>(e.g.,<sp/>invalidate<sp/>dynamic<sp/>atlases)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="41" refid="namespacePictureManager_1a1dd262f8927f1b1bcd5941b222cf5ed8" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="namespacePictureManager_1a1dd262f8927f1b1bcd5941b222cf5ed8" kindref="member">before_d3d_reset</ref>();</highlight></codeline>
<codeline lineno="42" refid="namespacePictureManager_1a62308700e8245e47c1f0d47ef615a822" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="namespacePictureManager_1a62308700e8245e47c1f0d47ef615a822" kindref="member">after_d3d_reset</ref>();</highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"></highlight><highlight class="comment">//<sp/>add<sp/>ref,<sp/>return<sp/>picture<sp/>ID,<sp/>texture<sp/>ID<sp/>and<sp/>left-top,<sp/>right-bottom<sp/>tex<sp/>coords<sp/>and<sp/>picture<sp/>size</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight><highlight class="comment">//<sp/>if<sp/>load_done_cb<sp/>is<sp/>not<sp/>NULL<sp/>-<sp/>request<sp/>considered<sp/>asynchronous<sp/>(i.e<sp/>callback<sp/>will<sp/>be<sp/>called<sp/>on</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"></highlight><highlight class="comment">//<sp/>load<sp/>completion<sp/>from<sp/>cpujobs::release_done_jobs())</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="47"><highlight class="normal"></highlight><highlight class="comment">//<sp/>return<sp/>true<sp/>if<sp/>request<sp/>was<sp/>synchronously<sp/>done<sp/>(or<sp/>picture<sp/>already<sp/>loaded)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight><highlight class="comment">//<sp/>and<sp/>false<sp/>otherwise<sp/>(i.e.<sp/>it<sp/>was<sp/>successfully<sp/>sheduled)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="49" refid="namespacePictureManager_1a7061748746b9395e84d909db8287c3f2" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="namespacePictureManager_1a7061748746b9395e84d909db8287c3f2" kindref="member">get_picture_ex</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*file_name,<sp/><ref refid="dag__picMgr_8h_1a1b029c2caf92d6a1931655479bcf05b5" kindref="member">PICTUREID</ref><sp/>&amp;out_pic_id,<sp/>TEXTUREID<sp/>&amp;out_tex_id,<sp/>d3d::SamplerHandle<sp/>&amp;out_smp_id,</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/>Point2<sp/>*out_tc_lefttop<sp/>=<sp/>NULL,<sp/>Point2<sp/>*out_tc_rightbottom<sp/>=<sp/>NULL,<sp/>Point2<sp/>*picture_size<sp/>=<sp/>NULL,</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><ref refid="namespacePictureManager_1aa8a639518169f2263ce46d858861b0b5" kindref="member">async_load_done_cb_t</ref><sp/>load_done_cb<sp/>=<sp/>NULL,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*cb_arg<sp/>=<sp/>NULL);</highlight></codeline>
<codeline lineno="52"><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight><highlight class="comment">//<sp/>add<sp/>ref,<sp/>fill<sp/>picture<sp/>description</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="54" refid="namespacePictureManager_1ad008b3e22012d95dee79926ce145387a" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="namespacePictureManager_1ad008b3e22012d95dee79926ce145387a" kindref="member">get_picture</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*file_name,<sp/><ref refid="structPictureManager_1_1PicDesc" kindref="compound">PicDesc</ref><sp/>&amp;out_pic);</highlight></codeline>
<codeline lineno="55"><highlight class="normal"></highlight></codeline>
<codeline lineno="56"><highlight class="normal"></highlight><highlight class="comment">//<sp/>add<sp/>picture<sp/>manually<sp/>(if<sp/>get_it<sp/>==<sp/>true,<sp/>than<sp/>function<sp/>setup<sp/>refcount<sp/>as<sp/>if<sp/>you<sp/>called<sp/>get_picture*()<sp/>after)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="57" refid="namespacePictureManager_1a49f374522971139e30755f5eec8e1d33" refkind="member"><highlight class="normal"><ref refid="dag__picMgr_8h_1a1b029c2caf92d6a1931655479bcf05b5" kindref="member">PICTUREID</ref><sp/><ref refid="namespacePictureManager_1a49f374522971139e30755f5eec8e1d33" kindref="member">add_picture</ref>(BaseTexture<sp/>*tex,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*as_name,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>get_it<sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="58"><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"></highlight><highlight class="comment">//<sp/>return<sp/>TEXTUREID<sp/>and<sp/>pointers<sp/>to<sp/>lt/rb<sp/>tex<sp/>coord<sp/>data<sp/>for<sp/>specified<sp/>PICTUREID</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal"></highlight><highlight class="comment">//<sp/>returns<sp/>BAD_TEXTUREID<sp/>on<sp/>error</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="61" refid="namespacePictureManager_1ab3176d6e7e3d90ca66b5058214ed71bf" refkind="member"><highlight class="normal">TEXTUREID<sp/><ref refid="namespacePictureManager_1ab3176d6e7e3d90ca66b5058214ed71bf" kindref="member">get_picture_data</ref>(<ref refid="dag__picMgr_8h_1a1b029c2caf92d6a1931655479bcf05b5" kindref="member">PICTUREID</ref><sp/>pid,<sp/>Point2<sp/>&amp;out_lt,<sp/>Point2<sp/>&amp;out_rb);</highlight></codeline>
<codeline lineno="62"><highlight class="normal"></highlight></codeline>
<codeline lineno="63"><highlight class="normal"></highlight><highlight class="comment">//<sp/>return<sp/>picture<sp/>size<sp/>in<sp/>pixels<sp/>or<sp/>(0,0)<sp/>on<sp/>error</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="64" refid="namespacePictureManager_1ac1ff51bffd2c1757c7a5d69d9694e6e0" refkind="member"><highlight class="normal">Point2<sp/><ref refid="namespacePictureManager_1ac1ff51bffd2c1757c7a5d69d9694e6e0" kindref="member">get_picture_pix_size</ref>(<ref refid="dag__picMgr_8h_1a1b029c2caf92d6a1931655479bcf05b5" kindref="member">PICTUREID</ref><sp/>pid);</highlight></codeline>
<codeline lineno="65"><highlight class="normal"></highlight></codeline>
<codeline lineno="66"><highlight class="normal"></highlight><highlight class="comment">//<sp/>return<sp/>total<sp/>texture<sp/>size<sp/>in<sp/>pixels<sp/>&amp;<sp/>picture<sp/>size<sp/>in<sp/>0..1<sp/>(in<sp/>texture<sp/>coordinates).</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="67"><highlight class="normal"></highlight><highlight class="comment">//<sp/>return<sp/>false,<sp/>if<sp/>texture<sp/>not<sp/>exists</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="68" refid="namespacePictureManager_1a7eb5cb7d24c778b5f5131a1fda0e48da" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="namespacePictureManager_1a7eb5cb7d24c778b5f5131a1fda0e48da" kindref="member">get_picture_size</ref>(<ref refid="dag__picMgr_8h_1a1b029c2caf92d6a1931655479bcf05b5" kindref="member">PICTUREID</ref><sp/>pid,<sp/>Point2<sp/>&amp;out_total_texsz,<sp/>Point2<sp/>&amp;out_picsz);</highlight></codeline>
<codeline lineno="69"><highlight class="normal"></highlight></codeline>
<codeline lineno="70"><highlight class="normal"></highlight><highlight class="comment">//<sp/>add<sp/>ref.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="71" refid="namespacePictureManager_1ad5f057af81401c10beb9b9328886b029" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="namespacePictureManager_1ad5f057af81401c10beb9b9328886b029" kindref="member">add_ref_picture</ref>(<ref refid="dag__picMgr_8h_1a1b029c2caf92d6a1931655479bcf05b5" kindref="member">PICTUREID</ref><sp/>pid);</highlight></codeline>
<codeline lineno="72"><highlight class="normal"></highlight></codeline>
<codeline lineno="73"><highlight class="normal"></highlight><highlight class="comment">//<sp/>del<sp/>ref.<sp/>if<sp/>refcount<sp/>is<sp/>zero,<sp/>unload<sp/>texture</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="74" refid="namespacePictureManager_1a1ee2f21f0bd27195e4efa15cb67a66e9" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="namespacePictureManager_1a1ee2f21f0bd27195e4efa15cb67a66e9" kindref="member">free_picture</ref>(<ref refid="dag__picMgr_8h_1a1b029c2caf92d6a1931655479bcf05b5" kindref="member">PICTUREID</ref><sp/>pic_id);</highlight></codeline>
<codeline lineno="75"><highlight class="normal"></highlight></codeline>
<codeline lineno="76"><highlight class="normal"></highlight><highlight class="comment">//<sp/>remove<sp/>all<sp/>unused<sp/>pictures<sp/>from<sp/>memory</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="77" refid="namespacePictureManager_1a8fd9131eba9100f40ac09970a46be987" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="namespacePictureManager_1a8fd9131eba9100f40ac09970a46be987" kindref="member">discard_unused_picture</ref>(</highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>force_lock<sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">);<sp/></highlight><highlight class="comment">//<sp/>return<sp/>false<sp/>if<sp/>discard<sp/>was<sp/>skipped</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="78"><highlight class="normal"></highlight></codeline>
<codeline lineno="79"><highlight class="normal"></highlight><highlight class="comment">//<sp/>loads<sp/>texture<sp/>atlas<sp/>internal<sp/>data</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="80" refid="namespacePictureManager_1ab3e40131a2e7c8d22a5326ce1ade2f69" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="namespacePictureManager_1ab3e40131a2e7c8d22a5326ce1ade2f69" kindref="member">load_tex_atlas_data</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*ta_fn,<sp/>DataBlock<sp/>&amp;out_ta_blk,<sp/>String<sp/>&amp;out_ta_tex_fn);</highlight></codeline>
<codeline lineno="81"><highlight class="normal"></highlight></codeline>
<codeline lineno="82"><highlight class="normal"></highlight><highlight class="comment">//<sp/>returns<sp/>true<sp/>when<sp/>atlas<sp/>referred<sp/>by<sp/>&apos;file_name&apos;<sp/>picture<sp/>is<sp/>dynamic;<sp/>optionally<sp/>returns<sp/>alpha<sp/>format</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="83" refid="namespacePictureManager_1a60bbac634572845e7da6eb9e169f8921" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="namespacePictureManager_1a60bbac634572845e7da6eb9e169f8921" kindref="member">is_picture_in_dynamic_atlas</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*file_name,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>*out_premul_alpha<sp/>=<sp/>NULL);</highlight></codeline>
<codeline lineno="84"><highlight class="normal"></highlight></codeline>
<codeline lineno="85"><highlight class="normal"></highlight></codeline>
<codeline lineno="86" refid="structPictureManager_1_1PictureRenderFactory" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structPictureManager_1_1PictureRenderFactory" kindref="compound">PictureRenderFactory</ref></highlight></codeline>
<codeline lineno="87"><highlight class="normal">{</highlight></codeline>
<codeline lineno="88" refid="structPictureManager_1_1PictureRenderFactory_1a968d9a1490b7c0460ee5a9bf71383692" refkind="member"><highlight class="normal"><sp/><sp/><ref refid="structPictureManager_1_1PictureRenderFactory" kindref="compound">PictureRenderFactory</ref><sp/>*<ref refid="structPictureManager_1_1PictureRenderFactory_1a968d9a1490b7c0460ee5a9bf71383692" kindref="member">next</ref><sp/>=<sp/>NULL;<sp/></highlight><highlight class="comment">//<sp/>slist</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="89" refid="structPictureManager_1_1PictureRenderFactory_1ae3feac2b782979781e1274bb75a876bc" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="structPictureManager_1_1PictureRenderFactory" kindref="compound">PictureRenderFactory</ref><sp/>*<ref refid="structPictureManager_1_1PictureRenderFactory_1ae3feac2b782979781e1274bb75a876bc" kindref="member">tail</ref>;</highlight></codeline>
<codeline lineno="90" refid="structPictureManager_1_1PictureRenderFactory_1a7dfd8d2d33b75750e60c9f4cb37a7002" refkind="member"><highlight class="normal"><sp/><sp/><ref refid="structPictureManager_1_1PictureRenderFactory_1a7dfd8d2d33b75750e60c9f4cb37a7002" kindref="member">PictureRenderFactory</ref>()</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structPictureManager_1_1PictureRenderFactory_1a968d9a1490b7c0460ee5a9bf71383692" kindref="member">next</ref><sp/>=<sp/><ref refid="structPictureManager_1_1PictureRenderFactory_1ae3feac2b782979781e1274bb75a876bc" kindref="member">tail</ref>;</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structPictureManager_1_1PictureRenderFactory_1ae3feac2b782979781e1274bb75a876bc" kindref="member">tail</ref><sp/>=<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="95"><highlight class="normal"></highlight></codeline>
<codeline lineno="96" refid="structPictureManager_1_1PictureRenderFactory_1a23204b89320f2f59f94897c824a5137e" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">virtual</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="structPictureManager_1_1PictureRenderFactory_1a23204b89320f2f59f94897c824a5137e" kindref="member">registered</ref>()<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="97" refid="structPictureManager_1_1PictureRenderFactory_1a7cc54ecc1fcdec480b85e6648c142511" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">virtual</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="structPictureManager_1_1PictureRenderFactory_1a7cc54ecc1fcdec480b85e6648c142511" kindref="member">unregistered</ref>()<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="98" refid="structPictureManager_1_1PictureRenderFactory_1a01b8aa60142456539cae60db679cd362" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">virtual</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="structPictureManager_1_1PictureRenderFactory_1a01b8aa60142456539cae60db679cd362" kindref="member">clearPendReq</ref>()<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="99" refid="structPictureManager_1_1PictureRenderFactory_1a79b65da9d2fd1c0a8bfe4af826fa3ddb" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">virtual</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="structPictureManager_1_1PictureRenderFactory_1a79b65da9d2fd1c0a8bfe4af826fa3ddb" kindref="member">match</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>DataBlock<sp/>&amp;pic_props,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>&amp;out_w,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>&amp;out_h)<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="100" refid="structPictureManager_1_1PictureRenderFactory_1ab1f33038d053c5e374624835feac789e" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">virtual</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="structPictureManager_1_1PictureRenderFactory_1ab1f33038d053c5e374624835feac789e" kindref="member">render</ref>(<ref refid="dag__occlusionSystem_8h_1a37ee2859ee04a3f5c750a5b5e3684c1d" kindref="member">Texture</ref><sp/>*to,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>x,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>y,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>w,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>h,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>DataBlock<sp/>&amp;pic_props,<sp/><ref refid="dag__picMgr_8h_1a1b029c2caf92d6a1931655479bcf05b5" kindref="member">PICTUREID</ref><sp/>pid)<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="101" refid="structPictureManager_1_1PictureRenderFactory_1aa22d00615d8b434cdf8968bfa969b936" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">virtual</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="structPictureManager_1_1PictureRenderFactory_1aa22d00615d8b434cdf8968bfa969b936" kindref="member">updatePerFrame</ref>()<sp/>{}</highlight></codeline>
<codeline lineno="102"><highlight class="normal">};</highlight></codeline>
<codeline lineno="103" refid="namespacePictureManager_1a281b4608c6e1b03a379300555178ca99" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="namespacePictureManager_1a281b4608c6e1b03a379300555178ca99" kindref="member">register_pic_render_factory</ref>(<ref refid="structPictureManager_1_1PictureRenderFactory" kindref="compound">PictureRenderFactory</ref><sp/>*f);</highlight></codeline>
<codeline lineno="104" refid="namespacePictureManager_1a360b8f21f203eaeffaf0d2a8d1110441" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="namespacePictureManager_1a360b8f21f203eaeffaf0d2a8d1110441" kindref="member">unregister_pic_render_factory</ref>(<ref refid="structPictureManager_1_1PictureRenderFactory" kindref="compound">PictureRenderFactory</ref><sp/>*f);</highlight></codeline>
<codeline lineno="105"><highlight class="normal">}<sp/></highlight><highlight class="comment">//<sp/>namespace<sp/>PictureManager</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="106"><highlight class="normal"></highlight></codeline>
<codeline lineno="107" refid="structPictureManager_1_1PicDesc" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal"><ref refid="structPictureManager_1_1PicDesc" kindref="compound">PictureManager::PicDesc</ref></highlight></codeline>
<codeline lineno="108"><highlight class="normal">{</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>Picture<sp/>and<sp/>texture<sp/>IDs</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="110" refid="structPictureManager_1_1PicDesc_1ae475974d138a5a578057ce9bd5b6ae44" refkind="member"><highlight class="normal"><sp/><sp/><ref refid="dag__picMgr_8h_1a1b029c2caf92d6a1931655479bcf05b5" kindref="member">PICTUREID</ref><sp/><ref refid="structPictureManager_1_1PicDesc_1ae475974d138a5a578057ce9bd5b6ae44" kindref="member">pic</ref>;</highlight></codeline>
<codeline lineno="111" refid="structPictureManager_1_1PicDesc_1aeb4c9a3510c77fa99e1bb866762ef41d" refkind="member"><highlight class="normal"><sp/><sp/>TEXTUREID<sp/><ref refid="structPictureManager_1_1PicDesc_1aeb4c9a3510c77fa99e1bb866762ef41d" kindref="member">tex</ref>;</highlight></codeline>
<codeline lineno="112" refid="structPictureManager_1_1PicDesc_1ac0ec828124b44fb054f1dce904bbd38f" refkind="member"><highlight class="normal"><sp/><sp/>d3d::SamplerHandle<sp/><ref refid="structPictureManager_1_1PicDesc_1ac0ec828124b44fb054f1dce904bbd38f" kindref="member">smp</ref>;</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>left-top<sp/>and<sp/>right-bottom<sp/>texture<sp/>coords</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="114" refid="structPictureManager_1_1PicDesc_1a209e99bf6ae7c2a3b85eb043789c3254" refkind="member"><highlight class="normal"><sp/><sp/>Point2<sp/><ref refid="structPictureManager_1_1PicDesc_1a209e99bf6ae7c2a3b85eb043789c3254" kindref="member">tcLt</ref>,<sp/><ref refid="structPictureManager_1_1PicDesc_1a8ea48c38318d6fc054d454922aef48d3" kindref="member">tcRb</ref>;</highlight></codeline>
<codeline lineno="115"><highlight class="normal"></highlight></codeline>
<codeline lineno="116" refid="structPictureManager_1_1PicDesc_1abb0fae02419813c09ceaf04bfea5d2d1" refkind="member"><highlight class="normal"><sp/><sp/><ref refid="structPictureManager_1_1PicDesc_1abb0fae02419813c09ceaf04bfea5d2d1" kindref="member">PicDesc</ref>()<sp/>:<sp/><ref refid="structPictureManager_1_1PicDesc_1ae475974d138a5a578057ce9bd5b6ae44" kindref="member">pic</ref>(<ref refid="dag__picMgr_8h_1a32ad040883ac82a48acf1b5aaebcc666" kindref="member">BAD_PICTUREID</ref>),<sp/><ref refid="structPictureManager_1_1PicDesc_1aeb4c9a3510c77fa99e1bb866762ef41d" kindref="member">tex</ref>(BAD_TEXTUREID),<sp/><ref refid="structPictureManager_1_1PicDesc_1ac0ec828124b44fb054f1dce904bbd38f" kindref="member">smp</ref>(<ref refid="namespaced3d" kindref="compound">d3d</ref>::INVALID_SAMPLER_HANDLE),<sp/><ref refid="structPictureManager_1_1PicDesc_1a209e99bf6ae7c2a3b85eb043789c3254" kindref="member">tcLt</ref>(0,<sp/>0),<sp/><ref refid="structPictureManager_1_1PicDesc_1a8ea48c38318d6fc054d454922aef48d3" kindref="member">tcRb</ref>(0,<sp/>0)<sp/>{}</highlight></codeline>
<codeline lineno="117" refid="structPictureManager_1_1PicDesc_1a15f409912a9e710fcfd56f16d7ab8f0b" refkind="member"><highlight class="normal"><sp/><sp/><ref refid="structPictureManager_1_1PicDesc_1a15f409912a9e710fcfd56f16d7ab8f0b" kindref="member">PicDesc</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structPictureManager_1_1PicDesc" kindref="compound">PicDesc</ref><sp/>&amp;picture)<sp/>:<sp/><ref refid="structPictureManager_1_1PicDesc_1ae475974d138a5a578057ce9bd5b6ae44" kindref="member">pic</ref>(picture.<ref refid="structPictureManager_1_1PicDesc_1ae475974d138a5a578057ce9bd5b6ae44" kindref="member">pic</ref>),<sp/><ref refid="structPictureManager_1_1PicDesc_1aeb4c9a3510c77fa99e1bb866762ef41d" kindref="member">tex</ref>(picture.<ref refid="structPictureManager_1_1PicDesc_1aeb4c9a3510c77fa99e1bb866762ef41d" kindref="member">tex</ref>),<sp/><ref refid="structPictureManager_1_1PicDesc_1ac0ec828124b44fb054f1dce904bbd38f" kindref="member">smp</ref>(picture.<ref refid="structPictureManager_1_1PicDesc_1ac0ec828124b44fb054f1dce904bbd38f" kindref="member">smp</ref>),<sp/><ref refid="structPictureManager_1_1PicDesc_1a209e99bf6ae7c2a3b85eb043789c3254" kindref="member">tcLt</ref>(picture.<ref refid="structPictureManager_1_1PicDesc_1a209e99bf6ae7c2a3b85eb043789c3254" kindref="member">tcLt</ref>),<sp/><ref refid="structPictureManager_1_1PicDesc_1a8ea48c38318d6fc054d454922aef48d3" kindref="member">tcRb</ref>(picture.<ref refid="structPictureManager_1_1PicDesc_1a8ea48c38318d6fc054d454922aef48d3" kindref="member">tcRb</ref>)</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="structPictureManager_1_1PicDesc_1ae475974d138a5a578057ce9bd5b6ae44" kindref="member">pic</ref><sp/>&gt;<sp/><ref refid="dag__picMgr_8h_1a32ad040883ac82a48acf1b5aaebcc666" kindref="member">BAD_PICTUREID</ref>)</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespacePictureManager_1ad5f057af81401c10beb9b9328886b029" kindref="member">PictureManager::add_ref_picture</ref>(<ref refid="structPictureManager_1_1PicDesc_1ae475974d138a5a578057ce9bd5b6ae44" kindref="member">pic</ref>);</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="122"><highlight class="normal"></highlight></codeline>
<codeline lineno="123" refid="structPictureManager_1_1PicDesc_1a5280d4933e7f1ad332e920abc93917a1" refkind="member"><highlight class="normal"><sp/><sp/><ref refid="structPictureManager_1_1PicDesc_1a5280d4933e7f1ad332e920abc93917a1" kindref="member">~PicDesc</ref>()<sp/>{<sp/><ref refid="structPictureManager_1_1PicDesc_1abea094fb9e9f55a5afa0e8b4af0c2d51" kindref="member">release</ref>();<sp/>}</highlight></codeline>
<codeline lineno="124"><highlight class="normal"></highlight></codeline>
<codeline lineno="125" refid="structPictureManager_1_1PicDesc_1ae4ab0f20ea2698a4e2081689b1786d87" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="structPictureManager_1_1PicDesc_1ae4ab0f20ea2698a4e2081689b1786d87" kindref="member">operator=</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="structPictureManager_1_1PicDesc" kindref="compound">PicDesc</ref><sp/>&amp;picture)</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structPictureManager_1_1PicDesc_1abea094fb9e9f55a5afa0e8b4af0c2d51" kindref="member">release</ref>();</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structPictureManager_1_1PicDesc_1ae475974d138a5a578057ce9bd5b6ae44" kindref="member">pic</ref><sp/>=<sp/>picture.<ref refid="structPictureManager_1_1PicDesc_1ae475974d138a5a578057ce9bd5b6ae44" kindref="member">pic</ref>;</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structPictureManager_1_1PicDesc_1aeb4c9a3510c77fa99e1bb866762ef41d" kindref="member">tex</ref><sp/>=<sp/>picture.<ref refid="structPictureManager_1_1PicDesc_1aeb4c9a3510c77fa99e1bb866762ef41d" kindref="member">tex</ref>;</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structPictureManager_1_1PicDesc_1ac0ec828124b44fb054f1dce904bbd38f" kindref="member">smp</ref><sp/>=<sp/>picture.<ref refid="structPictureManager_1_1PicDesc_1ac0ec828124b44fb054f1dce904bbd38f" kindref="member">smp</ref>;</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structPictureManager_1_1PicDesc_1a209e99bf6ae7c2a3b85eb043789c3254" kindref="member">tcLt</ref><sp/>=<sp/>picture.<ref refid="structPictureManager_1_1PicDesc_1a209e99bf6ae7c2a3b85eb043789c3254" kindref="member">tcLt</ref>;</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structPictureManager_1_1PicDesc_1a8ea48c38318d6fc054d454922aef48d3" kindref="member">tcRb</ref><sp/>=<sp/>picture.<ref refid="structPictureManager_1_1PicDesc_1a8ea48c38318d6fc054d454922aef48d3" kindref="member">tcRb</ref>;</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="structPictureManager_1_1PicDesc_1ae475974d138a5a578057ce9bd5b6ae44" kindref="member">pic</ref><sp/>&gt;<sp/><ref refid="dag__picMgr_8h_1a32ad040883ac82a48acf1b5aaebcc666" kindref="member">BAD_PICTUREID</ref>)</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespacePictureManager_1ad5f057af81401c10beb9b9328886b029" kindref="member">PictureManager::add_ref_picture</ref>(<ref refid="structPictureManager_1_1PicDesc_1ae475974d138a5a578057ce9bd5b6ae44" kindref="member">pic</ref>);</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="136"><highlight class="normal"></highlight></codeline>
<codeline lineno="137" refid="structPictureManager_1_1PicDesc_1ac85e26e38657cfdbcfbbcef9e6edfb15" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="structPictureManager_1_1PicDesc_1ac85e26e38657cfdbcfbbcef9e6edfb15" kindref="member">init</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*file_name)</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="dag__picMgr_8h_1a1b029c2caf92d6a1931655479bcf05b5" kindref="member">PICTUREID</ref><sp/>old_pic<sp/>=<sp/><ref refid="structPictureManager_1_1PicDesc_1ae475974d138a5a578057ce9bd5b6ae44" kindref="member">pic</ref>;</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespacePictureManager_1ad008b3e22012d95dee79926ce145387a" kindref="member">PictureManager::get_picture</ref>(file_name,<sp/>*</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(old_pic<sp/>&gt;<sp/><ref refid="dag__picMgr_8h_1a32ad040883ac82a48acf1b5aaebcc666" kindref="member">BAD_PICTUREID</ref>)</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespacePictureManager_1a1ee2f21f0bd27195e4efa15cb67a66e9" kindref="member">PictureManager::free_picture</ref>(old_pic);</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="144" refid="structPictureManager_1_1PicDesc_1abea094fb9e9f55a5afa0e8b4af0c2d51" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="structPictureManager_1_1PicDesc_1abea094fb9e9f55a5afa0e8b4af0c2d51" kindref="member">release</ref>()</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="structPictureManager_1_1PicDesc_1ae475974d138a5a578057ce9bd5b6ae44" kindref="member">pic</ref><sp/>&gt;<sp/><ref refid="dag__picMgr_8h_1a32ad040883ac82a48acf1b5aaebcc666" kindref="member">BAD_PICTUREID</ref>)</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespacePictureManager_1a1ee2f21f0bd27195e4efa15cb67a66e9" kindref="member">PictureManager::free_picture</ref>(<ref refid="structPictureManager_1_1PicDesc_1ae475974d138a5a578057ce9bd5b6ae44" kindref="member">pic</ref>);</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structPictureManager_1_1PicDesc_1ae475974d138a5a578057ce9bd5b6ae44" kindref="member">pic</ref><sp/>=<sp/><ref refid="dag__picMgr_8h_1a32ad040883ac82a48acf1b5aaebcc666" kindref="member">BAD_PICTUREID</ref>;</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structPictureManager_1_1PicDesc_1aeb4c9a3510c77fa99e1bb866762ef41d" kindref="member">tex</ref><sp/>=<sp/>BAD_TEXTUREID;</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structPictureManager_1_1PicDesc_1ac0ec828124b44fb054f1dce904bbd38f" kindref="member">smp</ref><sp/>=<sp/>d3d::INVALID_SAMPLER_HANDLE;</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="152"><highlight class="normal"></highlight></codeline>
<codeline lineno="153" refid="structPictureManager_1_1PicDesc_1acde2b3918f9b06c522a35f8c3dbfa789" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">inline</highlight><highlight class="normal"><sp/>Point2<sp/><ref refid="structPictureManager_1_1PicDesc_1acde2b3918f9b06c522a35f8c3dbfa789" kindref="member">getSize</ref>()</highlight><highlight class="keyword"><sp/>const<sp/></highlight><highlight class="normal">{<sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="namespacePictureManager_1ac1ff51bffd2c1757c7a5d69d9694e6e0" kindref="member">get_picture_pix_size</ref>(<ref refid="structPictureManager_1_1PicDesc_1ae475974d138a5a578057ce9bd5b6ae44" kindref="member">pic</ref>);<sp/>}</highlight></codeline>
<codeline lineno="154"><highlight class="normal"></highlight></codeline>
<codeline lineno="155" refid="structPictureManager_1_1PicDesc_1a5bc5f1ab6a333bbc237286e854870e3e" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="structPictureManager_1_1PicDesc_1a5bc5f1ab6a333bbc237286e854870e3e" kindref="member">updateTc</ref>()<sp/>const<sp/></highlight><highlight class="comment">//<sp/>actualize<sp/>TC<sp/>for<sp/>picture<sp/>in<sp/>dynamic<sp/>atlas</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((<ref refid="structPictureManager_1_1PicDesc_1ae475974d138a5a578057ce9bd5b6ae44" kindref="member">pic</ref><sp/>&amp;<sp/>0xC0000000)<sp/>==<sp/>0x40000000)</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespacePictureManager_1ab3176d6e7e3d90ca66b5058214ed71bf" kindref="member">get_picture_data</ref>(<ref refid="structPictureManager_1_1PicDesc_1ae475974d138a5a578057ce9bd5b6ae44" kindref="member">pic</ref>,<sp/></highlight><highlight class="keyword">const_cast&lt;</highlight><highlight class="normal">Point2<sp/>&amp;</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(<ref refid="structPictureManager_1_1PicDesc_1a209e99bf6ae7c2a3b85eb043789c3254" kindref="member">tcLt</ref>),<sp/></highlight><highlight class="keyword">const_cast&lt;</highlight><highlight class="normal">Point2<sp/>&amp;</highlight><highlight class="keyword">&gt;</highlight><highlight class="normal">(<ref refid="structPictureManager_1_1PicDesc_1a8ea48c38318d6fc054d454922aef48d3" kindref="member">tcRb</ref>));</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="160"><highlight class="normal">};</highlight></codeline>
    </programlisting>
    <location file="dag_picMgr.h"/>
  </compounddef>
</doxygen>
